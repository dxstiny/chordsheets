import{d as B,u as E,r as v,w as T,a as q,c as x,b as s,e as l,f,g,h as C,F as S,i as N,o as y,t as h,j as $,p as U,k as j,l as F,_ as M}from"./main-a84d293f.js";import{I as u,D as O}from"./Dropdown-6f4767a8.js";import{T as R,d as J,A as z,E as G}from"./vuedraggable.umd-25651495.js";import"./_commonjsHelpers-5069437b.js";const p=_=>(U("data-v-c1982f5a"),_=_(),j(),_),H={class:"dashboard"},K={class:"wrap"},Q=p(()=>s("h1",null,[F("Chord"),s("span",{class:"accent"},"Sheets")],-1)),W={class:"flex"},X=p(()=>s("hr",null,null,-1)),Y={class:"filters"},Z=p(()=>s("hr",null,null,-1)),ee={class:"song"},te={class:"cover"},se=["src"],oe={class:"info"},ne={class:"bpm"},ae={class:"key"},le=["onClick"],re={class:"card min-h-screen sticky learn"},ie={class:"content"},de=p(()=>s("h2",null,"Learn Music Theory",-1)),ce=p(()=>s("p",null,"Coming soon...",-1)),ue={class:"void"},pe={class:"parent"},_e=B({__name:"Dashboard",setup(_){const n=E(),w=v(),I=async()=>{await n.prepareRender();const e=JSON.stringify(n.songs,null,4),o=document.createElement("a"),a=new Blob([e],{type:"text/plain"});o.href=URL.createObjectURL(a),o.download="chordsheets.json",o.click()},L=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=o=>{var d;const a=(d=o.target.files)==null?void 0:d[0];if(!a)return;const t=new FileReader;t.onload=c=>{var k;const P=(k=c.target)==null?void 0:k.result,m=JSON.parse(P);if(!Array.isArray(m)){n.songs.push(m);return}n.songs=m},t.readAsText(a)},e.click()},b=async()=>{let e=new G({orientation:"portrait",unit:"px",format:"a4"});for(const o of w.value??[])await o.renderTo(e),o.song!==n.songs[n.songs.length-1]&&e.addPage();return e},V=async()=>{const e=await b();e.autoPrint(),e.output("dataurlnewwindow")},A=async()=>{(await b()).save("chordsheets.pdf")},r=v({artist:"",query:""}),i=v([]);T(()=>{i.value=n.songs.filter(e=>{if(r.value.artist&&r.value.artist!=="(any)"&&!e.artist.toLowerCase().includes(r.value.artist.toLowerCase()))return!1;const o=`${e.title} ${e.artist}`.toLowerCase();return!(r.value.query&&!o.includes(r.value.query.toLowerCase()))})});const D=({moved:e})=>{const o=n.songs.findIndex(c=>c.id===e.element.id),a=i.value[e.newIndex-1%i.value.length],t=a?n.songs.findIndex(c=>c.id===a.id):-1,d=e.newIndex>e.oldIndex?t:t+1;n.moveTo(o,d)};return(e,o)=>{const a=q("router-link");return y(),x(S,null,[s("div",H,[s("div",K,[s("main",null,[Q,s("div",W,[l(u,{icon:"add",label:"New Song",onClick:o[0]||(o[0]=t=>e.$router.push("/editor")),style:"green"}),l(u,{icon:"file_download",label:"Save Library",onClick:I,style:"yellow"}),l(u,{icon:"file_upload",label:"Import Library",onClick:L,style:"yellow"}),l(u,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:A,style:"blue"}),l(u,{label:"Print All",icon:"print",onClick:V,style:"blue"})]),X,s("div",Y,[l(R,{label:"Search",modelValue:r.value.query,"onUpdate:modelValue":o[1]||(o[1]=t=>r.value.query=t),placeholder:"Search for a song"},null,8,["modelValue"]),l(O,{label:"Artist",modelValue:r.value.artist,"onUpdate:modelValue":o[2]||(o[2]=t=>r.value.artist=t),options:["(any)",...new Set(f(n).songs.map(t=>t.artist))]},null,8,["modelValue","options"])]),Z,l(f(J),{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=t=>i.value=t),class:"songs",onChange:D,"item-key":"id",onDragover:o[4]||(o[4]=C(()=>{},["stop"]))},{item:g(({element:t})=>[l(a,{to:`/editor/${t.id}`},{default:g(()=>[s("div",ee,[s("div",te,[s("img",{src:t.cover||"placeholders/song.svg"},null,8,se)]),s("div",oe,[s("h2",null,h(t.title),1),s("span",null,h(t.artist),1)]),s("span",ne,h(t.bpm)+" BPM ",1),s("span",ae,h(t.key),1),s("span",{class:"material-symbols-rounded delete",onClick:C(d=>f(n).removeSong(t),["prevent"])}," delete ",8,le)])]),_:2},1032,["to"])]),_:1},8,["modelValue"])]),s("aside",re,[s("div",ie,[l(a,{to:"/learn"},{default:g(()=>[de]),_:1}),ce])])])]),s("div",ue,[s("div",pe,[(y(!0),x(S,null,N(f(n).songs,t=>(y(),$(z,{ref_for:!0,ref_key:"allPages",ref:w,song:t},null,8,["song"]))),256))])])],64)}}});const ge=M(_e,[["__scopeId","data-v-c1982f5a"]]);export{ge as default};
