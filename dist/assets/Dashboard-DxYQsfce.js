import{d as T,u as $,a as j,r as y,c as P,b,e as s,F as k,f as A,g as h,w as I,t as i,h as C,i as m,j as q,k as p,l as U,m as B,o as _,n as D,p as z,q as O,_ as G}from"./main-DFzgqNvZ.js";import{I as w}from"./IconButton-T42IZKqA.js";import{E as J}from"./dom-to-image-3q07vxJc.js";import{u as K,E}from"./history-CqkQL1I3.js";/* empty css                                                                   */import"./_commonjsHelpers-BosuxZz1.js";import"./vuedraggable.umd-tbI6JYYd.js";const n=v=>(z("data-v-b2f59174"),v=v(),O(),v),Q={class:"grid"},W={class:"container column w-2 h-2"},X=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"history"),p(" Recently edited ")],-1)),Y={class:"song"},Z={class:"cover"},ss=["src"],es={class:"info"},ts={class:"bpm"},os={class:"key"},ns=["onClick"],as={class:"container column clickable"},rs=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"list"),p(" Library ")],-1)),ls={class:"wght-900"},is={class:"row space-between gap-2 centre"},cs=n(()=>s("p",{class:"muted row gap-2"},"Chord Sheets",-1)),ds={class:"container column gap-2"},us=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"list"),p(" Library ")],-1)),_s={class:"row space-between gap-2 centre"},ps={class:"container column gap-2"},hs=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"school"),p(" Learn ")],-1)),ms=n(()=>s("p",null,"How well do you know your scales?",-1)),vs={class:"container column"},gs=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"favorite"),p(" Favourite Artist ")],-1)),ws={class:"wght-900"},fs=n(()=>s("p",null,"Most common artist in your library",-1)),ys={class:"content"},bs={class:"preview-container"},ks={class:"preview scale-sm"},Cs=n(()=>s("h2",null,"Rendering...",-1)),Ss=n(()=>s("p",null," Please wait while we render your chord sheets. This may take a while. ",-1)),xs={class:"row"},Ps=["value","max"],As={class:"void"},Is={class:"parent"},Bs=T({__name:"Dashboard",setup(v){const S=$(),a=j(),L=K(),N=U(),g=y(),f=y(),c=y(-1),x=async()=>{var d,r;(d=f.value)==null||d.showModal();let e=new J({orientation:"portrait",unit:"px",format:"a4"});c.value=0;for(const l of g.value??[])console.log(l.name()),await l.renderTo(e),c.value++,l.song!==a.songs[a.songs.length-1]&&e.addPage();return(r=f.value)==null||r.close(),c.value=-1,e},R=async()=>{const e=await x();e.autoPrint(),e.output("dataurlnewwindow")},F=async()=>{(await x()).save("chordsheets.pdf")},M=()=>{const e=a.createNew();N.push(S.editorUrl(e.id))},V=P(()=>{var l;const d=a.songs.map(o=>o.artist).reduce((o,u)=>(o[u]=(o[u]||0)+1,o),{}),r=Object.entries(d).sort((o,u)=>u[1]-o[1]);return(l=r==null?void 0:r[0])==null?void 0:l[0]}),H=P(()=>L.history.slice(0,3).map(e=>a.song(e.songId)));return(e,d)=>{var o,u;const r=B("router-link"),l=B("RouterLink");return _(),b(k,null,[s("div",Q,[s("div",W,[X,(_(!0),b(k,null,A(H.value,t=>(_(),C(r,{to:m(S).editorUrl((t==null?void 0:t.id)??0)},{default:I(()=>[s("div",Y,[s("div",Z,[s("img",{src:t.cover||"placeholders/song.svg"},null,8,ss)]),s("div",es,[s("h2",null,i(t.title),1),s("span",null,i(t.artist),1)]),s("span",ts,i(t.bpm)+" BPM ",1),s("span",os,i(t.key),1),s("span",{class:"material-symbols-rounded delete",onClick:D(Ds=>m(a).removeSong(t),["prevent"])}," delete ",8,ns)])]),_:2},1032,["to"]))),256))]),h(l,{to:"/browse"},{default:I(()=>[s("div",as,[rs,s("h1",ls,i(m(a).songs.length),1),s("div",is,[cs,h(w,{icon:"add",onClick:D(M,["prevent"]),style:"green"})])])]),_:1}),s("div",ds,[us,s("div",_s,[h(w,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:F,style:"blue"}),h(w,{label:"Print All",icon:"print",onClick:R,style:"blue"})])]),s("div",ps,[hs,ms,h(w,{label:"Start learning",icon:"arrow_forward",onClick:d[0]||(d[0]=t=>e.$router.push("/learn/scale-quiz")),style:"blue"})]),s("div",vs,[gs,s("h1",ws,i(V.value),1),fs])]),s("dialog",{ref_key:"renderDialog",ref:f},[s("div",ys,[s("div",bs,[s("div",ks,[c.value>=0?(_(),C(E,{key:0,printing:"",song:m(a).songs[c.value]},null,8,["song"])):q("",!0)])]),Cs,Ss,s("div",xs,[s("progress",{value:c.value,max:(o=g.value)==null?void 0:o.length},null,8,Ps),s("p",null,[s("span",null,i(c.value),1),p(" / "+i((u=g.value)==null?void 0:u.length),1)])])])],512),s("div",As,[s("div",Is,[(_(!0),b(k,null,A(m(a).songs,t=>(_(),C(E,{ref_for:!0,ref_key:"allPages",ref:g,printing:"",song:t},null,8,["song"]))),256))])])],64)}}}),Hs=G(Bs,[["__scopeId","data-v-b2f59174"]]);export{Hs as default};
