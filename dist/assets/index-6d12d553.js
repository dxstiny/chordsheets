import{d as h,u as k,a as b,b as S,r as f,o as g,c as C,e as x,f as D,w as m,g as I,h as o,i as v,p as R,j as E,_ as K}from"./main-4913db01.js";import{M as N}from"./MinWidth-fa6ba412.js";import{E as L}from"./Editor-78ff3cc4.js";import"./dom-to-image-21fdec62.js";import"./_commonjsHelpers-042e6b4d.js";const P=s=>(R("data-v-e3496ac2"),s=s(),E(),s),j={class:"editor_container"},A=P(()=>o("span",{class:"material-symbols-rounded"},"arrow_back",-1)),B=h({__name:"index",setup(s){const a=k(),w=b(),i=S();let r=w.params.id;const d=f();if(!r){const e=a.addEmptySong();i.push({path:`/editor/${e}`,replace:!0}),r=String(e)}const c=a.song(r);c||i.push("/");const n=f(c),l=async()=>{await a.prepareRender();const e=await d.value.render();e&&(e.autoPrint(),window.open(e.output("bloburl"),"_blank"))},p=async()=>{await a.prepareRender();const e=await d.value.render();e&&e.save(`${n.value.title}.pdf`)},u=()=>{if(!n.value)return;const e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n.value)),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",`${n.value.title}.chordsheets.json`),document.body.appendChild(t),t.click(),t.remove()},_=e=>{e.ctrlKey&&e.key==="s"?(e.preventDefault(),u()):e.ctrlKey&&e.shiftKey&&e.key==="S"?(e.preventDefault(),p()):e.ctrlKey&&e.key==="p"&&(e.preventDefault(),l())};return g(()=>{window.addEventListener("keydown",_)}),C(()=>{window.removeEventListener("keydown",_)}),(e,t)=>{const y=x("router-link");return I(),D(N,{minWidth:300},{default:m(()=>[o("div",j,[v(y,{to:"/",class:"back-button"},{default:m(()=>[A]),_:1}),o("div",{class:"toolbar"},[o("span",{class:"material-symbols-rounded",onClick:l,title:"Print (Ctrl+P)"}," print "),o("span",{class:"material-symbols-rounded",onClick:p,title:"Download as PDF (CTRL+SHIFT+S)"}," picture_as_pdf "),o("span",{class:"material-symbols-rounded",onClick:u,title:"Download as JSON (CTRL+S)"}," file_download ")]),v(L,{ref_key:"editor",ref:d,song:n.value},null,8,["song"])])]),_:1})}}});const O=K(B,[["__scopeId","data-v-e3496ac2"]]);export{O as default};
