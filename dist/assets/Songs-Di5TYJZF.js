import{d as V,k as x,u as h,r as f,w as k,c as v,a as u,b as r,f as i,h as C,e as I,l as g,m as b,F as q,n as D,q as B,o as c,_ as N}from"./main-Ff3BIIMF.js";import{I as U}from"./IconButton-CgkpZHp-.js";import{D as L}from"./Dropdown-C2TNHjvP.js";import{T}from"./TextInput-D1EOUd74.js";import{d as E}from"./vuedraggable.umd-C9rQ_nbd.js";import{S as M}from"./Song-BzEItQPT.js";/* empty css                                                                   *//* empty css                                                                 */const $={class:"toolbar"},A={class:"filters"},F={key:0,class:"songs"},O={class:"muted"},R=V({__name:"Songs",setup(W){const m=x(),a=h(),w=D(),_=()=>{const t=a.createNew();t.title=s.value.query,w.push(m.editorUrl(t.id))},s=f({artist:"",query:""}),n=f([]);k(()=>{n.value=a.songs.filter(t=>{if(s.value.artist&&s.value.artist!=="(any)"&&!t.artist.toLowerCase().includes(s.value.artist.toLowerCase()))return!1;const o=`${t.title} ${t.artist}`.toLowerCase();return!(s.value.query&&!o.includes(s.value.query.toLowerCase()))})});const S=({moved:t})=>{const o=a.songs.findIndex(d=>d.id===t.element.id),l=n.value[t.newIndex-1%n.value.length],e=l?a.songs.findIndex(d=>d.id===l.id):-1,p=t.newIndex>t.oldIndex?e:e+1;a.moveTo(o,p)},y=window.innerWidth<800;return(t,o)=>{const l=B("router-link");return c(),v(q,null,[u("div",$,[u("div",A,[r(T,{label:"Search",modelValue:s.value.query,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value.query=e),placeholder:"Search for a song"},null,8,["modelValue"]),r(L,{label:"Artist",modelValue:s.value.artist,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value.artist=e),options:["(any)",...new Set(i(a).songs.map(e=>e.artist).sort())]},null,8,["modelValue","options"])])]),n.value.length?(c(),I(i(E),{key:1,modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=e=>n.value=e),class:"songs",onChange:S,"item-key":"id",onDragover:o[3]||(o[3]=b(()=>{},["stop"])),disabled:y},{item:g(({element:e})=>[r(l,{to:i(m).editorUrl(e.id)},{default:g(()=>[r(M,{song:e,"allow-delete":"",onDelete:p=>i(a).removeSong(e)},null,8,["song","onDelete"])]),_:2},1032,["to"])]),_:1},8,["modelValue"])):(c(),v("div",F,[u("p",O,[C(" No songs found. Do you want to add it? "),r(U,{icon:"add",label:"Add a new song",onClick:_})])]))],64)}}}),X=N(R,[["__scopeId","data-v-5e6aa010"]]);export{X as default};
