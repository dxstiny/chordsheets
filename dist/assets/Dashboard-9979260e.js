import{d as q,r as y,c as A,a as B,b as _,e as s,f as l,u as f,F as h,g as b,o as i,h as C,w as P,t as k,i as E,p as N,j}from"./main-5b5f4825.js";import{u as F,I as c,T as R,D as T,_ as U,E as O}from"./TextInput-7b34c100.js";import{_ as J}from"./_commonjsHelpers-78881197.js";const p=d=>(N("data-v-d352c1a9"),d=d(),j(),d),M={class:"dashboard"},z={class:"wrap"},G=p(()=>s("h1",null,"Chordsheets",-1)),H=p(()=>s("hr",null,null,-1)),K={class:"flex"},Q=p(()=>s("hr",null,null,-1)),W={class:"filters"},X=p(()=>s("hr",null,null,-1)),Y={class:"songs"},Z={class:"song"},ee={class:"header"},te={class:"info"},se=["onClick"],oe={class:"void"},ae={class:"parent"},ne=q({__name:"Dashboard",setup(d){const a=F(),v=y(),S=async()=>{await a.prepareRender();const e=JSON.stringify(a.songs,null,4),t=document.createElement("a"),r=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(r),t.download="chordsheets.json",t.click()},x=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=t=>{var u;const r=(u=t.target.files)==null?void 0:u[0];if(!r)return;const o=new FileReader;o.onload=g=>{var w;const D=(w=g.target)==null?void 0:w.result,$=JSON.parse(D);a.songs=$},o.readAsText(r)},e.click()},m=async()=>{let e=new O({orientation:"portrait",unit:"px",format:"a4"});for(const t of v.value??[])await t.renderTo(e),t.song!==a.songs[a.songs.length-1]&&e.addPage();return e},L=async()=>{const e=await m();e.autoPrint(),e.output("dataurlnewwindow")},I=async()=>{(await m()).save("chordsheets.pdf")},n=y({artist:"",query:""}),V=A(()=>a.songs.filter(e=>{if(n.value.artist&&n.value.artist!=="(any)"&&!e.artist.toLowerCase().includes(n.value.artist.toLowerCase()))return!1;const t=`${e.title} ${e.artist}`.toLowerCase();return!(n.value.query&&!t.includes(n.value.query.toLowerCase()))}));return(e,t)=>{const r=B("router-link");return i(),_(h,null,[s("div",M,[s("div",z,[G,H,s("div",K,[l(c,{icon:"add",label:"New Song",onClick:t[0]||(t[0]=o=>e.$router.push("/editor"))}),l(c,{icon:"file_download",label:"Save Library",onClick:S}),l(c,{icon:"file_upload",label:"Import Library",onClick:x}),l(c,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:I}),l(c,{label:"Print All",icon:"print",onClick:L})]),Q,s("div",W,[l(R,{label:"Search",modelValue:n.value.query,"onUpdate:modelValue":t[1]||(t[1]=o=>n.value.query=o),placeholder:"Search for a song"},null,8,["modelValue"]),l(T,{label:"Artist",modelValue:n.value.artist,"onUpdate:modelValue":t[2]||(t[2]=o=>n.value.artist=o),options:["(any)",...new Set(f(a).songs.map(o=>o.artist))]},null,8,["modelValue","options"])]),X,s("div",Y,[(i(!0),_(h,null,b(V.value,(o,u)=>(i(),C(r,{to:`/editor?s=${u}`},{default:P(()=>[s("div",Z,[s("div",ee,[s("div",te,[s("h2",null,k(o.title),1),s("span",null,k(o.artist),1)]),s("span",{class:"material-symbols-rounded",onClick:E(g=>f(a).removeSong(o),["prevent"])}," delete ",8,se)])])]),_:2},1032,["to"]))),256))])])]),s("div",oe,[s("div",ae,[(i(!0),_(h,null,b(f(a).songs,o=>(i(),C(U,{ref_for:!0,ref_key:"allPages",ref:v,song:o},null,8,["song"]))),256))])])],64)}}});const ce=J(ne,[["__scopeId","data-v-d352c1a9"]]);export{ce as default};
