import{d as w,c2 as C,c3 as E,r,s as f,x as A,v as K,c as z,a as s,t as v,h as B,b as h,o as I,c1 as L,_ as Q}from"./main-CW3Kub0x.js";import{S as V}from"./scales-DhWloI9m.js";import{S as j,n as D}from"./index-DyCwOq9a.js";import{I as g}from"./IconButton-DuT_LWjB.js";import{K as O}from"./Keyboard-BVqDVHGZ.js";import{s as P,a as R}from"./inputListener-B0P_0QA4.js";/* empty css                                                                   */const T={class:"scale-quiz"},Y=["value","max"],q={class:"header"},F={class:"info"},H={class:"accent"},$={class:"score"},G={class:"body"},J={class:"scale"},U=w({__name:"ScaleQuiz",setup(W){const y=new j().toDestination(),m=e=>e[Math.floor(Math.random()*e.length)],c=[...C,...E],u=r("C"),i=r("Major"),a=r([]),d=r(0),p=()=>{u.value=m(c),i.value=m(L),a.value=[],d.value=0};p();const n=f(()=>{const e=c.indexOf(u.value);return V[i.value].keys.map(t=>(t+e)%12)}),S=()=>{const e=n.value[0],t=l=>l>=e?"4":"5",o=n.value.map(l=>c[l]+t(l));o.push(c[e]+"5");const N=D();o.forEach((l,M)=>{y.triggerAttackRelease(l,"8n",N+M/2)})},_=e=>{a.value.includes(e)||a.value.length!==n.value.length&&(d.value++,n.value.includes(e)&&a.value.push(e))},b=(e,t,o)=>Math.max(Math.min(e,o),t),k=(e,t)=>+(Math.round(e+"e"+t)+"e-"+t),x=f(()=>{const e=a.value.length/n.value.length*100,t=(d.value-a.value.length)*5,o=b(e-t,0,100);return k(o,1)});return A(()=>{P()}),K(R.value,e=>{for(let t of Object.keys(e)){const o=parseInt(t)%12;_(o)}}),(e,t)=>(I(),z("div",T,[s("progress",{value:a.value.length,max:n.value.length},null,8,Y),s("div",q,[t[1]||(t[1]=s("h2",null,"Scale Quiz",-1)),s("div",F,[s("h3",null,[s("span",H,v(u.value),1),B(" "+v(i.value),1)]),h(g,{icon:"play_arrow",label:"Play Scale",onClick:S})]),s("div",$,[t[0]||(t[0]=s("span",{class:"material-symbols-rounded"},"star",-1)),s("span",null,v(x.value)+"%",1)])]),s("div",G,[s("div",J,[h(O,{highlight:a.value,onKeypress:_,clickable:"",min:0,max:11},null,8,["highlight"])]),h(g,{icon:"arrow_forward",label:"Continue",onClick:p,disabled:a.value.length<n.value.length},null,8,["disabled"])])]))}}),ne=Q(U,[["__scopeId","data-v-575d3354"]]);export{ne as default};
