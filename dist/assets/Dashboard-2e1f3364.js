import{d as T,r as h,w as $,a as q,c as w,b as o,e as r,u as _,f as b,F as x,g as A,o as m,t as k,h as B,i as N,p as P,j as U,k as j}from"./main-2e932615.js";import{u as F,I as u,T as O,D as R,d as M,_ as J,E as z}from"./vuedraggable.umd-0b224424.js";import{_ as G}from"./_commonjsHelpers-4c1cfbbd.js";const f=p=>(P("data-v-56305839"),p=p(),U(),p),H={class:"dashboard"},K={class:"wrap"},Q=f(()=>o("h1",null,[j("Chord"),o("span",{class:"accent"},"Sheets")],-1)),W={class:"flex"},X=f(()=>o("hr",null,null,-1)),Y={class:"filters"},Z=f(()=>o("hr",null,null,-1)),ee={class:"card hover song"},te={class:"header"},se={class:"info"},oe=["onClick"],ne=f(()=>o("div",{class:"card min-h-screen sticky"},[o("div",{class:"content"},[o("h2",null,"Learn Music Theory"),o("p",null,"Coming soon...")])],-1)),ae={class:"void"},le={class:"parent"},re=T({__name:"Dashboard",setup(p){const n=F(),v=h(),C=async()=>{await n.prepareRender();const e=JSON.stringify(n.songs,null,4),t=document.createElement("a"),l=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(l),t.download="chordsheets.json",t.click()},S=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=t=>{var i;const l=(i=t.target.files)==null?void 0:i[0];if(!l)return;const s=new FileReader;s.onload=d=>{var y;const D=(y=d.target)==null?void 0:y.result,E=JSON.parse(D);n.songs=E},s.readAsText(l)},e.click()},g=async()=>{let e=new z({orientation:"portrait",unit:"px",format:"a4"});for(const t of v.value??[])await t.renderTo(e),t.song!==n.songs[n.songs.length-1]&&e.addPage();return e},I=async()=>{const e=await g();e.autoPrint(),e.output("dataurlnewwindow")},L=async()=>{(await g()).save("chordsheets.pdf")},a=h({artist:"",query:""}),c=h([]);$(()=>{c.value=n.songs.filter(e=>{if(a.value.artist&&a.value.artist!=="(any)"&&!e.artist.toLowerCase().includes(a.value.artist.toLowerCase()))return!1;const t=`${e.title} ${e.artist}`.toLowerCase();return!(a.value.query&&!t.includes(a.value.query.toLowerCase()))})});const V=({moved:e})=>{const t=n.songs.findIndex(d=>d.id===e.element.id),l=c.value[e.newIndex-1%c.value.length],s=l?n.songs.findIndex(d=>d.id===l.id):-1,i=e.newIndex>e.oldIndex?s:s+1;n.moveTo(t,i)};return(e,t)=>{const l=q("router-link");return m(),w(x,null,[o("div",H,[o("div",K,[Q,o("div",W,[r(u,{icon:"add",label:"New Song",onClick:t[0]||(t[0]=s=>e.$router.push("/editor")),style:"green"}),r(u,{icon:"file_download",label:"Save Library",onClick:C,style:"yellow"}),r(u,{icon:"file_upload",label:"Import Library",onClick:S,style:"yellow"}),r(u,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:L,style:"blue"}),r(u,{label:"Print All",icon:"print",onClick:I,style:"blue"})]),X,o("div",Y,[r(O,{label:"Search",modelValue:a.value.query,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.query=s),placeholder:"Search for a song"},null,8,["modelValue"]),r(R,{label:"Artist",modelValue:a.value.artist,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.artist=s),options:["(any)",...new Set(_(n).songs.map(s=>s.artist))]},null,8,["modelValue","options"])]),Z,r(_(M),{modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=s=>c.value=s),class:"songs",onChange:V,"item-key":"id"},{item:b(({element:s,index:i})=>[r(l,{to:`/editor?s=${i}`},{default:b(()=>[o("div",ee,[o("div",te,[o("div",se,[o("h2",null,k(s.title),1),o("span",null,k(s.artist),1)]),o("span",{class:"material-symbols-rounded",onClick:B(d=>_(n).removeSong(s),["prevent"])}," delete ",8,oe)])])]),_:2},1032,["to"])]),_:1},8,["modelValue"])]),ne]),o("div",ae,[o("div",le,[(m(!0),w(x,null,A(_(n).songs,s=>(m(),N(J,{ref_for:!0,ref_key:"allPages",ref:v,song:s},null,8,["song"]))),256))])])],64)}}});const ue=G(re,[["__scopeId","data-v-56305839"]]);export{ue as default};
