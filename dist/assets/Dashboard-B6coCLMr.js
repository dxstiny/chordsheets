import{d as T,u as $,a as j,r as f,c as x,b as y,e as s,F as b,f as P,g as p,w as I,t as r,h as k,i as h,j as q,k as u,l as U,m as B,o as d,n as D,p as z,q as O,_ as G}from"./main-rlhmeQaC.js";import{I as g}from"./IconButton-DsLkC8UD.js";import{E as J}from"./dom-to-image-Bnns0Qfg.js";import{u as K,E}from"./history-CB-H3b7-.js";/* empty css                                                                   */import"./_commonjsHelpers-BosuxZz1.js";import"./vuedraggable.umd-CarpODAZ.js";const n=m=>(z("data-v-955714e3"),m=m(),O(),m),Q={class:"grid"},W={class:"container column w-2 h-2"},X=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"history"),u(" Recently edited ")],-1)),Y={class:"song"},Z={class:"cover"},ss=["src"],es={class:"info"},ts={class:"bpm"},os={class:"key"},ns=["onClick"],as={class:"container column clickable"},rs=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"list"),u(" Library ")],-1)),ls={class:"wght-900"},is={class:"row space-between gap-2 centre"},cs=n(()=>s("p",{class:"muted row gap-2"},"Chord Sheets",-1)),ds={class:"container column gap-2"},us=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"list"),u(" Library ")],-1)),_s={class:"row space-between gap-2 centre"},ps={class:"container column gap-2"},hs=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"school"),u(" Learn ")],-1)),ms=n(()=>s("p",null,"How well do you know your scales?",-1)),vs={class:"container column"},gs=n(()=>s("p",{class:"muted row gap-2"},[s("span",{class:"material-symbols-rounded"},"favorite"),u(" Favourite Artist ")],-1)),ws={class:"wght-900"},fs=n(()=>s("p",null,"Most common artist in your library",-1)),ys={class:"content"},bs={class:"preview-container"},ks={class:"preview scale-sm"},Ss=n(()=>s("h2",null,"Rendering...",-1)),Cs=n(()=>s("p",null," Please wait while we render your chord sheets. This may take a while. ",-1)),As={class:"row"},xs=["value","max"],Ps={class:"void"},Is={class:"parent"},Bs=T({__name:"Dashboard",setup(m){const S=$(),a=j(),L=K(),N=U(),v=f(),w=f(),l=f(-1),C=async()=>{var i,_;(i=w.value)==null||i.showModal();let e=new J({orientation:"portrait",unit:"px",format:"a4"});l.value=0;for(const t of v.value??[])console.log(t.name()),await t.renderTo(e),l.value++,t.song!==a.songs[a.songs.length-1]&&e.addPage();return(_=w.value)==null||_.close(),l.value=-1,e},R=async()=>{const e=await C();e.autoPrint(),e.output("dataurlnewwindow")},F=async()=>{(await C()).save("chordsheets.pdf")},M=()=>{const e=a.createNew();N.push(S.editorUrl(e.id))},V=x(()=>{const i=a.songs.map(t=>t.artist).reduce((t,c)=>(t[c]=(t[c]||0)+1,t),{});return Object.entries(i).sort((t,c)=>c[1]-t[1])[0][0]}),H=x(()=>L.history.slice(0,3).map(e=>a.song(e.songId)));return(e,i)=>{var c,A;const _=B("router-link"),t=B("RouterLink");return d(),y(b,null,[s("div",Q,[s("div",W,[X,(d(!0),y(b,null,P(H.value,o=>(d(),k(_,{to:h(S).editorUrl((o==null?void 0:o.id)??0)},{default:I(()=>[s("div",Y,[s("div",Z,[s("img",{src:o.cover||"placeholders/song.svg"},null,8,ss)]),s("div",es,[s("h2",null,r(o.title),1),s("span",null,r(o.artist),1)]),s("span",ts,r(o.bpm)+" BPM ",1),s("span",os,r(o.key),1),s("span",{class:"material-symbols-rounded delete",onClick:D(Ds=>h(a).removeSong(o),["prevent"])}," delete ",8,ns)])]),_:2},1032,["to"]))),256))]),p(t,{to:"/browse"},{default:I(()=>[s("div",as,[rs,s("h1",ls,r(h(a).songs.length),1),s("div",is,[cs,p(g,{icon:"add",onClick:D(M,["prevent"]),style:"green"})])])]),_:1}),s("div",ds,[us,s("div",_s,[p(g,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:F,style:"blue"}),p(g,{label:"Print All",icon:"print",onClick:R,style:"blue"})])]),s("div",ps,[hs,ms,p(g,{label:"Start learning",icon:"arrow_forward",onClick:i[0]||(i[0]=o=>e.$router.push("/learn/scale-quiz")),style:"blue"})]),s("div",vs,[gs,s("h1",ws,r(V.value),1),fs])]),s("dialog",{ref_key:"renderDialog",ref:w},[s("div",ys,[s("div",bs,[s("div",ks,[l.value>=0?(d(),k(E,{key:0,printing:"",song:h(a).songs[l.value]},null,8,["song"])):q("",!0)])]),Ss,Cs,s("div",As,[s("progress",{value:l.value,max:(c=v.value)==null?void 0:c.length},null,8,xs),s("p",null,[s("span",null,r(l.value),1),u(" / "+r((A=v.value)==null?void 0:A.length),1)])])])],512),s("div",Ps,[s("div",Is,[(d(!0),y(b,null,P(h(a).songs,o=>(d(),k(E,{ref_for:!0,ref_key:"allPages",ref:v,printing:"",song:o},null,8,["song"]))),256))])])],64)}}}),Hs=G(Bs,[["__scopeId","data-v-955714e3"]]);export{Hs as default};
