import{d as q,r as y,c as A,a as B,b as _,e as t,f as l,u as f,F as h,g as b,o as i,h as k,w as N,t as C,i as P,p as E,j as T,k as j}from"./main-d8e66240.js";import{u as F,I as c,T as R,D as U,_ as O,E as J}from"./TextInput-1690fc10.js";import{_ as M}from"./_commonjsHelpers-dfb99f0a.js";const p=d=>(E("data-v-77541ac5"),d=d(),T(),d),z={class:"dashboard"},G={class:"wrap"},H=p(()=>t("h1",null,[j("Chord"),t("span",{class:"accent"},"Sheets")],-1)),K=p(()=>t("hr",null,null,-1)),Q={class:"flex"},W=p(()=>t("hr",null,null,-1)),X={class:"filters"},Y=p(()=>t("hr",null,null,-1)),Z={class:"songs"},ee={class:"song"},te={class:"header"},se={class:"info"},oe=["onClick"],ae={class:"void"},ne={class:"parent"},le=q({__name:"Dashboard",setup(d){const a=F(),v=y(),S=async()=>{await a.prepareRender();const e=JSON.stringify(a.songs,null,4),s=document.createElement("a"),r=new Blob([e],{type:"text/plain"});s.href=URL.createObjectURL(r),s.download="chordsheets.json",s.click()},x=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=s=>{var u;const r=(u=s.target.files)==null?void 0:u[0];if(!r)return;const o=new FileReader;o.onload=g=>{var w;const D=(w=g.target)==null?void 0:w.result,$=JSON.parse(D);a.songs=$},o.readAsText(r)},e.click()},m=async()=>{let e=new J({orientation:"portrait",unit:"px",format:"a4"});for(const s of v.value??[])await s.renderTo(e),s.song!==a.songs[a.songs.length-1]&&e.addPage();return e},L=async()=>{const e=await m();e.autoPrint(),e.output("dataurlnewwindow")},V=async()=>{(await m()).save("chordsheets.pdf")},n=y({artist:"",query:""}),I=A(()=>a.songs.filter(e=>{if(n.value.artist&&n.value.artist!=="(any)"&&!e.artist.toLowerCase().includes(n.value.artist.toLowerCase()))return!1;const s=`${e.title} ${e.artist}`.toLowerCase();return!(n.value.query&&!s.includes(n.value.query.toLowerCase()))}));return(e,s)=>{const r=B("router-link");return i(),_(h,null,[t("div",z,[t("div",G,[H,K,t("div",Q,[l(c,{icon:"add",label:"New Song",onClick:s[0]||(s[0]=o=>e.$router.push("/editor"))}),l(c,{icon:"file_download",label:"Save Library",onClick:S}),l(c,{icon:"file_upload",label:"Import Library",onClick:x}),l(c,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:V}),l(c,{label:"Print All",icon:"print",onClick:L})]),W,t("div",X,[l(R,{label:"Search",modelValue:n.value.query,"onUpdate:modelValue":s[1]||(s[1]=o=>n.value.query=o),placeholder:"Search for a song"},null,8,["modelValue"]),l(U,{label:"Artist",modelValue:n.value.artist,"onUpdate:modelValue":s[2]||(s[2]=o=>n.value.artist=o),options:["(any)",...new Set(f(a).songs.map(o=>o.artist))]},null,8,["modelValue","options"])]),Y,t("div",Z,[(i(!0),_(h,null,b(I.value,(o,u)=>(i(),k(r,{to:`/editor?s=${u}`},{default:N(()=>[t("div",ee,[t("div",te,[t("div",se,[t("h2",null,C(o.title),1),t("span",null,C(o.artist),1)]),t("span",{class:"material-symbols-rounded",onClick:P(g=>f(a).removeSong(o),["prevent"])}," delete ",8,oe)])])]),_:2},1032,["to"]))),256))])])]),t("div",ae,[t("div",ne,[(i(!0),_(h,null,b(f(a).songs,o=>(i(),k(O,{ref_for:!0,ref_key:"allPages",ref:v,song:o},null,8,["song"]))),256))])])],64)}}});const de=M(le,[["__scopeId","data-v-77541ac5"]]);export{de as default};
