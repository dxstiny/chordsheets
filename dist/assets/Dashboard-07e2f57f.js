import{d as B,r as m,w as D,a as E,c as k,b as s,e as l,u as f,f as v,F as x,g as T,o as g,t as h,h as q,i as N,p as $,j as U,k as j}from"./main-5e89385d.js";import{I as u,D as F}from"./Dropdown-e04ae4c4.js";import{u as M,T as O,d as R,A as J,E as z}from"./vuedraggable.umd-3a6447a1.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-549abcda.js";const p=_=>($("data-v-3d07d285"),_=_(),U(),_),H={class:"dashboard"},K={class:"wrap"},Q=p(()=>s("h1",null,[j("Chord"),s("span",{class:"accent"},"Sheets")],-1)),W={class:"flex"},X=p(()=>s("hr",null,null,-1)),Y={class:"filters"},Z=p(()=>s("hr",null,null,-1)),ee={class:"song"},te={class:"cover"},se=["src"],oe={class:"info"},ne={class:"bpm"},ae={class:"key"},le=["onClick"],re={class:"card min-h-screen sticky learn"},ie={class:"content"},de=p(()=>s("h2",null,"Learn Music Theory",-1)),ce=p(()=>s("p",null,"Coming soon...",-1)),ue={class:"void"},pe={class:"parent"},_e=B({__name:"Dashboard",setup(_){const n=M(),y=m(),C=async()=>{await n.prepareRender();const e=JSON.stringify(n.songs,null,4),o=document.createElement("a"),a=new Blob([e],{type:"text/plain"});o.href=URL.createObjectURL(a),o.download="chordsheets.json",o.click()},S=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=o=>{var d;const a=(d=o.target.files)==null?void 0:d[0];if(!a)return;const t=new FileReader;t.onload=c=>{var b;const A=(b=c.target)==null?void 0:b.result,P=JSON.parse(A);n.songs=P},t.readAsText(a)},e.click()},w=async()=>{let e=new z({orientation:"portrait",unit:"px",format:"a4"});for(const o of y.value??[])await o.renderTo(e),o.song!==n.songs[n.songs.length-1]&&e.addPage();return e},I=async()=>{const e=await w();e.autoPrint(),e.output("dataurlnewwindow")},L=async()=>{(await w()).save("chordsheets.pdf")},r=m({artist:"",query:""}),i=m([]);D(()=>{i.value=n.songs.filter(e=>{if(r.value.artist&&r.value.artist!=="(any)"&&!e.artist.toLowerCase().includes(r.value.artist.toLowerCase()))return!1;const o=`${e.title} ${e.artist}`.toLowerCase();return!(r.value.query&&!o.includes(r.value.query.toLowerCase()))})});const V=({moved:e})=>{const o=n.songs.findIndex(c=>c.id===e.element.id),a=i.value[e.newIndex-1%i.value.length],t=a?n.songs.findIndex(c=>c.id===a.id):-1,d=e.newIndex>e.oldIndex?t:t+1;n.moveTo(o,d)};return(e,o)=>{const a=E("router-link");return g(),k(x,null,[s("div",H,[s("div",K,[s("main",null,[Q,s("div",W,[l(u,{icon:"add",label:"New Song",onClick:o[0]||(o[0]=t=>e.$router.push("/editor")),style:"green"}),l(u,{icon:"file_download",label:"Save Library",onClick:C,style:"yellow"}),l(u,{icon:"file_upload",label:"Import Library",onClick:S,style:"yellow"}),l(u,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:L,style:"blue"}),l(u,{label:"Print All",icon:"print",onClick:I,style:"blue"})]),X,s("div",Y,[l(O,{label:"Search",modelValue:r.value.query,"onUpdate:modelValue":o[1]||(o[1]=t=>r.value.query=t),placeholder:"Search for a song"},null,8,["modelValue"]),l(F,{label:"Artist",modelValue:r.value.artist,"onUpdate:modelValue":o[2]||(o[2]=t=>r.value.artist=t),options:["(any)",...new Set(f(n).songs.map(t=>t.artist))]},null,8,["modelValue","options"])]),Z,l(f(R),{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=t=>i.value=t),class:"songs",onChange:V,"item-key":"id"},{item:v(({element:t})=>[l(a,{to:`/editor/${t.id}`},{default:v(()=>[s("div",ee,[s("div",te,[s("img",{src:t.cover||"placeholders/song.svg"},null,8,se)]),s("div",oe,[s("h2",null,h(t.title),1),s("span",null,h(t.artist),1)]),s("span",ne,h(t.bpm)+" BPM ",1),s("span",ae,h(t.key),1),s("span",{class:"material-symbols-rounded delete",onClick:q(d=>f(n).removeSong(t),["prevent"])}," delete ",8,le)])]),_:2},1032,["to"])]),_:1},8,["modelValue"])]),s("aside",re,[s("div",ie,[l(a,{to:"/learn"},{default:v(()=>[de]),_:1}),ce])])])]),s("div",ue,[s("div",pe,[(g(!0),k(x,null,T(f(n).songs,t=>(g(),N(J,{ref_for:!0,ref_key:"allPages",ref:y,song:t},null,8,["song"]))),256))])])],64)}}});const ye=G(_e,[["__scopeId","data-v-3d07d285"]]);export{ye as default};
