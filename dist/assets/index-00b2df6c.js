import{M as re,m as ue}from"./importMidi-518c4aaa.js";import{d as S,r as V,q as Z,g as u,k as d,h as t,t as k,D as N,l as w,F as $,C,A as ne,i as f,p as G,j as Y,_ as B,o as K,n as U,B as ce,u as q,f as L,E as F,bF as J,v as de,bv as pe,w as R,bG as me,y as ee,b8 as z,b0 as ve,a as _e,b as ge,e as fe}from"./main-9d3c6656.js";import{d as he,E as ye,a as te}from"./dom-to-image-02da8873.js";import{T as I}from"./TextInput-27040fd6.js";import{D as H,I as M}from"./Dropdown-27a4cc34.js";import{s as be,c as se}from"./inputListener-ea665b7d.js";import{M as oe}from"./MinWidth-a76ed6d4.js";import"./_commonjsHelpers-042e6b4d.js";const A=a=>(G("data-v-42d65bab"),a=a(),Y(),a),ke={key:0,class:"meta"},Ve={class:"wrap-to-line"},$e={class:"info"},we=A(()=>t("span",{class:"material-symbols-rounded"},"music_note",-1)),xe={class:"info"},Ce=A(()=>t("span",{class:"material-symbols-rounded"},"piano",-1)),Se={key:0,class:"info"},Pe={class:"material-symbols-rounded"},Ie={key:1,class:"info"},Ue={class:"material-symbols-rounded"},Ee={key:0,class:"info"},Ne=A(()=>t("span",{class:"material-symbols-rounded"}," check ",-1)),Me={class:"capitalise"},Be={key:0},Te={class:"instruments"},Oe={class:"instrument"},qe={class:"flex space-between"},je={class:"flex gap-2"},De=A(()=>t("span",{class:"material-symbols-rounded"},"volume_up",-1)),Re={class:"settings"},Ae={class:"muted"},Fe={key:0},Le={class:"structure"},We=A(()=>t("hr",null,null,-1)),Je=["id"],ze={class:"progression"},He=["onClick"],Ge=S({__name:"Page",props:{currentPage:{required:!0,type:Number},pages:{required:!0,type:Array},song:{required:!0,type:Object}},setup(a,{expose:y}){const _=a,e=V([]),g=V([]),b=V(),p=()=>[...e.value,...g.value],l=(n,s)=>{const c=new CustomEvent("chord-click",{detail:{sectionIndex:n,chordIndex:s}});window.dispatchEvent(c)};y({getSections:p});const r=n=>{let{type:s,name:c}=n;return s==="(other)"?c:s+(c?`: ${c}`:"")},m=Z(()=>{var n;return(n=_.pages[_.currentPage])==null?void 0:n.filter(s=>s==null?void 0:s.type)}),o=Z(()=>_.pages[_.currentPage].filter(n=>n==null?void 0:n.signature));return(n,s)=>{var c,v,x;return u(),d("div",{class:"page",ref_key:"page",ref:b},[a.currentPage==0?(u(),d("div",ke,[t("h2",null,k(a.song.artist),1),t("h1",null,k(a.song.title),1),t("div",Ve,[t("div",$e,[we,N(" "+k(a.song.bpm)+" BPM ",1)]),t("div",xe,[Ce,N(" "+k(a.song.key),1)]),a.song.transpose?(u(),d("div",Se,[t("span",Pe,k(a.song.transpose>0?"arrow_upward":"arrow_downward"),1),N(" "+k(a.song.transpose),1)])):w("",!0),a.song.octave?(u(),d("div",Ie,[t("span",Ue,k(a.song.octave>0?"arrow_upward":"arrow_downward"),1),N(" "+k(a.song.octave)+" octave ",1)])):w("",!0),(u(!0),d($,null,C((c=a.song.legacy)==null?void 0:c.options,(i,h)=>(u(),d($,null,[i?(u(),d("div",Ee,[Ne,t("span",Me,k(h),1)])):w("",!0)],64))),256))]),Object.keys(((v=a.song.legacy)==null?void 0:v.instruments)??{}).length?(u(),d("hr",Be)):w("",!0),t("div",Te,[(u(!0),d($,null,C((x=a.song.legacy)==null?void 0:x.instruments,(i,h)=>(u(),d("div",Oe,[t("div",qe,[t("span",null,k(h),1),t("span",je,[De,N(" "+k(i==null?void 0:i.volume),1)])]),t("div",Re,[t("h3",null,k(i==null?void 0:i.name),1),t("span",Ae,[N(k(i==null?void 0:i.type)+" ",1),i!=null&&i.page?(u(),d($,{key:0},[N(" | P"+k(i==null?void 0:i.page),1)],64)):w("",!0)])])]))),256))]),a.song.structure?(u(),d($,{key:1},[a.song.structure.length?(u(),d("hr",Fe)):w("",!0),t("div",Le,[(u(!0),d($,null,C(a.song.structure,i=>(u(),d("span",null,k(i),1))),256))])],64)):w("",!0),We])):w("",!0),(u(!0),d($,null,C(m.value,(i,h)=>(u(),d("div",{class:"section",ref_for:!0,ref_key:"sections",ref:e,id:String(h)},[t("span",null,k(r(i)),1),t("div",ze,[(u(!0),d($,null,C(i.progression,(P,E)=>(u(),d("div",{class:ne(["chord",`w-${P.duration}`+(P.selected?" selected":"")]),onClick:j=>l(h,E)},k(P.chord),11,He))),256))])],8,Je))),256)),a.song.midi?(u(!0),d($,{key:1},C(o.value,i=>{var h;return u(),d("div",{class:"section",ref_for:!0,ref_key:"midiSections",ref:g},[t("span",null,k(i==null?void 0:i.name),1),f(re,{track:i,width:((h=b.value)==null?void 0:h.clientWidth)??400},null,8,["track","width"])],512)}),256)):w("",!0)],512)}}});const ae=B(Ge,[["__scopeId","data-v-42d65bab"]]),Ye={class:"wrap"},Ke=S({__name:"AllPages",props:{song:{required:!0,type:Object}},setup(a,{expose:y}){const _=a,e=V(),g=V(),b=V(),p=()=>{var v,x,i;const o=(v=g.value)==null?void 0:v[0];if(!o)return;const n=[],s=(i=(x=b.value)==null?void 0:x[0])==null?void 0:i.getSections();if(!s)return;const c=[..._.song.sections,..._.song.midi??[]];for(let h=0;h<s.length;h++){const P=s[h],E=c[h],j=P.getBoundingClientRect().bottom,T=(o==null?void 0:o.getBoundingClientRect().height)??0,D=Math.ceil(j/T)-1;if(!n[D]){n[D]=[E];continue}n[D].push(E)}m.value=n,m.value.length||m.value.push([null])};K(p),U(()=>_.song.sections.length,()=>{m.value=[[..._.song.sections,..._.song.midi??[]]],ce(p)});const l=async o=>{if(!e.value)return o;const n=e.value.querySelectorAll(".parent__element");let s=n[0];const c=s.clientHeight/s.clientWidth;for(let i=0;i<m.value.length;i++){if(s=n[i],!s)continue;var v=o.internal.pageSize.getWidth(),x=o.internal.pageSize.getHeight();const h=2,P=await he.toJpeg(s,{height:s.offsetHeight*h,width:s.offsetWidth*h,style:{transform:`scale(${h}) translate(${s.offsetWidth/2/h}px, ${s.offsetHeight/2/h}px)`}});x=c*v,o.addImage(P,"JPG",0,0,v,x),i+1<m.value.length&&o.addPage()}return o},r=async()=>{const o=new ye({orientation:"portrait",unit:"px",format:"a4"});return await l(o),o},m=V([[..._.song.sections,..._.song.midi??[]]]);return m.value[0].length===0&&(m.value=[[null]]),y({render:r,renderTo:l,song:_.song}),(o,n)=>(u(),d("div",{ref_key:"allpageselement",ref:e,id:"allPages"},[(u(!0),d($,null,C(m.value,(s,c)=>(u(),d("div",{class:"print a4 parent__element",ref_for:!0,ref_key:"parent",ref:g},[t("div",Ye,[f(ae,{class:"page__element",ref_for:!0,ref_key:"element",ref:b,song:a.song,pages:m.value,currentPage:c},null,8,["song","pages","currentPage"])])],512))),256))],512))}});const Qe=B(Ke,[["__scopeId","data-v-b8c86e17"]]),Xe={class:"song printable"},Ze={class:"wrap"},et={class:"void"},tt=S({__name:"Song",props:{song:{required:!0,type:Object}},setup(a,{expose:y}){const _=a,e=q(),g=V(),b=V(),p=V(),l=V([[..._.song.sections,..._.song.midi??[]]]),r=V(0);K(()=>{var E,j;if(!p.value)return;const i=[],h=(E=b.value)==null?void 0:E.getSections();if(!h)return;const P=[..._.song.sections,..._.song.midi??[]];for(let T=0;T<h.length;T++){const D=h[T],X=P[T],le=D.getBoundingClientRect().bottom,ie=((j=p.value)==null?void 0:j.getBoundingClientRect().bottom)??0,W=Math.ceil(le/ie)-1;if(!i[W]){i[W]=[X];continue}i[W].push(X)}l.value=i,l.value.length||l.value.push([null])});const m=()=>{r.value+1>=l.value.length||r.value++},o=()=>{r.value-1<0||r.value--},n=()=>r.value+1,s=()=>l.value.length,c=async()=>{var i;return await((i=g.value)==null?void 0:i.render())};return y({nextPage:m,prevPage:o,getCurrentPage:n,getTotalPages:s,download:async()=>{await e.prepareRender();const i=await c();i&&i.save(`${_.song.title}.pdf`)},print:async()=>{await e.prepareRender();const i=await c();i&&(i.autoPrint(),window.open(i.output("bloburl"),"_blank"))}}),(i,h)=>(u(),d("div",{class:"parent",ref_key:"element",ref:p},[t("div",Xe,[t("div",Ze,[f(Qe,{ref_key:"allPages",ref:g,song:a.song},null,8,["song"])])]),t("div",et,[f(ae,{ref_key:"mainPage",ref:b,song:a.song,pages:l.value,currentPage:r.value},null,8,["song","pages","currentPage"])])],512))}});const st=B(tt,[["__scopeId","data-v-fb9a3e9a"]]),ot={class:"input"},nt={key:0},at=["value","max","min"],lt=S({__name:"NumberInput",props:{modelValue:{required:!0,type:Number},max:{required:!1,type:Number},min:{required:!1,type:Number},label:{required:!1,type:String}},emits:["update:modelValue"],setup(a,{emit:y}){const _=e=>{const g=e.target.value;y("update:modelValue",Number(g))};return(e,g)=>(u(),d("div",ot,[a.label?(u(),d("h2",nt,k(a.label),1)):w("",!0),t("input",{value:a.modelValue,onInput:_,class:"textinput",type:"number",max:a.max,min:a.min},null,40,at)]))}});const O=B(lt,[["__scopeId","data-v-a474a2f7"]]),it={class:"material-symbols-rounded"},rt={key:0},ut=S({__name:"Checkbox",props:{modelValue:{required:!0,type:Boolean},label:{required:!1,type:String}},emits:["update:modelValue"],setup(a,{emit:y}){const _=e=>{y("update:modelValue",e)};return(e,g)=>(u(),d("div",{class:"input",onClick:g[0]||(g[0]=b=>_(!a.modelValue))},[t("span",it,k(a.modelValue?"check_box":"check_box_outline_blank"),1),a.label?(u(),d("h2",rt,k(a.label),1)):w("",!0)]))}});const ct=B(ut,[["__scopeId","data-v-96cc0e53"]]),dt={class:"group"},pt=t("h2",null,"Options",-1),mt={class:"content"},vt={class:"group"},_t=t("div",{class:"flex space-between"},[t("h2",null,"Instruments")],-1),gt={class:"content"},ft={class:"group"},ht={class:"flex end"},yt=["onClick"],bt={class:"content"},kt={class:"flex"},Vt=S({__name:"Instrument",props:{song:{required:!0,type:Object}},setup(a){const y=a,_=q();U(()=>y.song,p=>{p&&(e.value=p)});const e=V(y.song),g=p=>{if(["l","r1","r2"].includes(p)&&!e.value.instruments[p]){e.value.instruments[p]={type:J[0],name:J[0],volume:100,page:1};return}};U(()=>e.value,p=>{p&&_.updateSong(p)});const b=V({});return window.addEventListener("click",p=>{let l=p.target;for(let o=0;o<5;o++){if(!l)return;if(l.classList.contains("group")||!l.parentElement)break;l=l.parentElement}if(!l)return;const[r,m]=l.id.split(".");for(let o=0;o<e.value.sections.length;o++){const n=e.value.sections[o];for(let s=0;s<n.progression.length;s++){if(o===Number(r)&&s===Number(m))continue;const c=n.progression[s];delete c.selected}}}),window.addEventListener("chord-click",p=>{const{sectionIndex:l,chordIndex:r}=p.detail,m=`${l}.${r}`,o=()=>{var n;(n=document.getElementById(m))==null||n.scrollIntoView({behavior:"smooth",block:"center"})};if(!b.value.sections){b.value.sections=!0,setTimeout(o,10);return}o()}),(p,l)=>(u(),d($,null,[t("div",dt,[pt,t("div",mt,[(u(!0),d($,null,C(e.value.options,(r,m)=>(u(),L(ct,{modelValue:e.value.options[m],"onUpdate:modelValue":o=>e.value.options[m]=o,label:m},null,8,["modelValue","onUpdate:modelValue","label"]))),256))])]),t("div",vt,[_t,t("div",gt,[(u(!0),d($,null,C(Object.keys(e.value.instruments),r=>(u(),d("div",ft,[t("h2",null,k(r),1),t("div",ht,[t("span",{onClick:m=>delete e.value.instruments[r],class:"material-symbols-rounded"}," - ",8,yt)]),t("div",bt,[f(I,{modelValue:e.value.instruments[r].name,"onUpdate:modelValue":m=>e.value.instruments[r].name=m,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),f(O,{modelValue:e.value.instruments[r].volume,"onUpdate:modelValue":m=>e.value.instruments[r].volume=m,min:0,max:127,label:"volume"},null,8,["modelValue","onUpdate:modelValue"]),f(O,{modelValue:e.value.instruments[r].page,"onUpdate:modelValue":m=>e.value.instruments[r].page=m,label:"page"},null,8,["modelValue","onUpdate:modelValue"]),f(H,{modelValue:e.value.instruments[r].type,"onUpdate:modelValue":m=>e.value.instruments[r].type=m,options:F(J),label:"type"},null,8,["modelValue","onUpdate:modelValue","options"])])]))),256))]),t("div",kt,[(u(),d($,null,C(["l","r1","r2"],r=>de(f(M,{onClick:m=>g(r),icon:"add",label:"Add "+r},null,8,["onClick","label"]),[[pe,!e.value.instruments[r]]])),64))])])],64))}}),$t=S({__name:"Metadata",props:{song:{required:!0,type:Object}},setup(a){const y=a,_=q();U(()=>y.song,p=>{p&&(e.value=p)});const e=V(y.song);U(()=>e.value,p=>{p&&_.updateSong(p)});const g=async()=>{var o;if(!e.value.artist||!e.value.title)return;const p=`artist:${e.value.artist} track:${e.value.title}`,m=(o=(await(await fetch("http://localhost:1234/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:p,scope:["spotify"]})})).json()).spotifyTracks)==null?void 0:o[0];m&&(e.value.spotify=m.url,e.value.cover=m.cover,b())},b=async()=>{if(console.log("getMetadata"),!e.value.spotify)return;e.value.spotify.includes("?")&&(e.value.spotify=e.value.spotify.split("?")[0]);const l=await(await fetch("http://localhost:1234/api/spotify/meta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceFetch:!0,spotifyId:e.value.spotify.split("/").pop()})})).json();e.value.bpm=Math.round(l.spotify.features.tempo),e.value.key=l.spotify.features.key+(l.spotify.features.mode==="Minor"?"m":"")};return(p,l)=>(u(),d($,null,[f(I,{modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=r=>e.value.title=r),label:"title",onChange:g},null,8,["modelValue"]),f(I,{modelValue:e.value.artist,"onUpdate:modelValue":l[1]||(l[1]=r=>e.value.artist=r),label:"artist",onChange:g},null,8,["modelValue"]),f(I,{modelValue:e.value.spotify,"onUpdate:modelValue":l[2]||(l[2]=r=>e.value.spotify=r),label:"Spotify Link",onChange:b,buttonIcon:"search",onButtonClick:g},null,8,["modelValue"]),f(I,{modelValue:e.value.key,"onUpdate:modelValue":l[3]||(l[3]=r=>e.value.key=r),label:"key"},null,8,["modelValue"]),f(O,{modelValue:e.value.bpm,"onUpdate:modelValue":l[4]||(l[4]=r=>e.value.bpm=r),min:0,label:"bpm"},null,8,["modelValue"]),f(O,{modelValue:e.value.transpose,"onUpdate:modelValue":l[5]||(l[5]=r=>e.value.transpose=r),min:-12,max:12,label:"transpose"},null,8,["modelValue"]),f(O,{modelValue:e.value.octave,"onUpdate:modelValue":l[6]||(l[6]=r=>e.value.octave=r),min:-1,max:1,label:"octave"},null,8,["modelValue"])],64))}}),Q=a=>(G("data-v-83d7eaa8"),a=a(),Y(),a),wt={class:"group"},xt=Q(()=>t("h2",null,"Structure",-1)),Ct={class:"content"},St={class:"group"},Pt={class:"flex space-between"},It=Q(()=>t("h2",null,"Sections",-1)),Ut={class:"group section"},Et={class:"flex space-between"},Nt={class:"flex"},Mt=["onClick"],Bt={class:"content"},Tt=["onClick","id"],Ot={class:"flex end"},qt=["onClick"],jt={class:"content flex-row"},Dt={class:"group"},Rt=Q(()=>t("h2",null,"Melodies",-1)),At={class:"content"},Ft={class:"group"},Lt={class:"flex"},Wt=S({__name:"Structure",props:{song:{required:!0,type:Object}},setup(a){const y=a,_=q();U(()=>y.song,o=>{o&&(e.value=o)});const e=V(y.song);U(()=>e.value,o=>{o&&_.updateSong(o)});const g=V({});window.addEventListener("click",o=>{let n=o.target;for(let v=0;v<5;v++){if(!n)return;if(n.classList.contains("group")||!n.parentElement)break;n=n.parentElement}if(!n)return;const[s,c]=n.id.split(".");for(let v=0;v<e.value.sections.length;v++){const x=e.value.sections[v];for(let i=0;i<x.progression.length;i++){if(v===Number(s)&&i===Number(c))continue;const h=x.progression[i];delete h.selected}}}),window.addEventListener("chord-click",o=>{const{sectionIndex:n,chordIndex:s}=o.detail,c=`${n}.${s}`,v=()=>{var x;(x=document.getElementById(c))==null||x.scrollIntoView({behavior:"smooth",block:"center"})};if(!g.value.sections){g.value.sections=!0,setTimeout(v,10);return}v()});const b=o=>{e.value.midi&&e.value.midi.splice(o,1)},p=async()=>new Promise((o,n)=>{const s=document.createElement("input");s.type="file",s.accept=".mid",s.onchange=async()=>{if(!s.files){n();return}const c=s.files[0],v=await ue(c);if(!v){n();return}o(v)},s.click()}),l=async o=>{const n=await p();n&&e.value.midi&&(e.value.midi[o]=n)},r=async()=>{e.value.midi||(e.value.midi=[]);const o=await p();o&&e.value.midi.push(o)},m=o=>{const n=se.value.includes("detected")?e.value.key:se.value;o.progression.push({chord:n,duration:4,id:Math.random().toString(36)})};return K(()=>{be()}),(o,n)=>(u(),d($,null,[t("div",wt,[xt,t("div",Ct,[(u(!0),d($,null,C(e.value.structure,(s,c)=>(u(),L(H,{modelValue:e.value.structure[c],"onUpdate:modelValue":[v=>e.value.structure[c]=v,v=>{v==="(none)"&&e.value.structure.splice(c,1)}],options:[...e.value.sections.map(v=>String(v.type)),"(none)"],label:"section"},null,8,["modelValue","onUpdate:modelValue","options"]))),256))]),f(M,{onClick:n[0]||(n[0]=s=>e.value.structure.push("")),icon:"add",label:"add section"})]),t("div",St,[t("div",Pt,[It,t("span",{class:"material-symbols-rounded",onClick:n[1]||(n[1]=s=>g.value.sections=!g.value.sections)},k(g.value.sections?"expand_less":"expand_more"),1)]),g.value.sections?(u(),d($,{key:0},[f(F(te),{modelValue:e.value.sections,"onUpdate:modelValue":n[3]||(n[3]=s=>e.value.sections=s),class:"content","item-key":"id",onDragover:n[4]||(n[4]=ee(()=>{},["stop"]))},{item:R(({element:s})=>[t("div",Ut,[t("div",Et,[t("div",Nt,[f(H,{modelValue:s.type,"onUpdate:modelValue":c=>s.type=c,options:F(me),label:"type"},null,8,["modelValue","onUpdate:modelValue","options"]),f(I,{modelValue:s.name,"onUpdate:modelValue":c=>s.name=c,label:"name"},null,8,["modelValue","onUpdate:modelValue"])]),t("span",{onClick:c=>e.value.sections.splice(e.value.sections.indexOf(s),1),class:"material-symbols-rounded"}," delete ",8,Mt)]),t("div",Bt,[f(F(te),{modelValue:s.progression,"onUpdate:modelValue":c=>s.progression=c,class:"content","item-key":s.id,onDragover:n[2]||(n[2]=ee(()=>{},["stop"]))},{item:R(({element:c})=>[t("div",{class:"group chord",onClick:v=>c.selected=!0,id:e.value.sections.indexOf(s)+"."+s.progression.indexOf(c)},[t("div",Ot,[t("span",{onClick:v=>s.progression.splice(s.progression.indexOf(c),1),class:"material-symbols-rounded"},"-",8,qt)]),t("div",jt,[f(I,{modelValue:c.chord,"onUpdate:modelValue":v=>c.chord=v,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),f(O,{modelValue:c.duration,"onUpdate:modelValue":v=>c.duration=v,min:1,label:"duration"},null,8,["modelValue","onUpdate:modelValue"])])],8,Tt)]),_:2},1032,["modelValue","onUpdate:modelValue","item-key"])]),f(M,{onClick:c=>m(s),icon:"add",label:"add chord"},null,8,["onClick"])])]),_:1},8,["modelValue"]),f(M,{onClick:n[5]||(n[5]=s=>e.value.sections.push({type:"chorus",progression:[],id:Math.random().toString(36)})),icon:"add",label:"add section"})],64)):w("",!0)]),t("div",Dt,[Rt,t("div",At,[(u(!0),d($,null,C(a.song.midi,(s,c)=>(u(),d("div",Ft,[f(I,{modelValue:s.name,"onUpdate:modelValue":v=>s.name=v,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),t("div",Lt,[f(M,{onClick:v=>b(c),icon:"delete",label:"delete"},null,8,["onClick"]),f(M,{onClick:v=>l(c),icon:"sync",label:"replace"},null,8,["onClick"])])]))),256))]),f(M,{onClick:r,icon:"add",label:"add"})])],64))}});const Jt=B(Wt,[["__scopeId","data-v-83d7eaa8"]]),zt={class:"settings"},Ht={key:0,class:"spotify"},Gt=["src"],Yt={class:"tabs flex space-between"},Kt=["onClick"],Qt={class:"configuration"},Xt=S({__name:"Editor",props:{song:{required:!0,type:Object}},setup(a){const y=a;q(),U(()=>y.song,b=>{b&&(_.value=b)});const _=V(y.song),e=[{name:"metadata",component:z($t)},{name:"instrument",component:z(Vt)},{name:"sections",component:z(Jt)}],g=V(e[0]);return(b,p)=>(u(),d("div",zt,[_.value.spotify?(u(),d("div",Ht,[t("iframe",{src:`https://open.spotify.com/embed/track/${_.value.spotify.split("/").pop()}`,width:"100%",height:"80",frameborder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,Gt)])):w("",!0),t("div",Yt,[(u(),d($,null,C(e,l=>t("label",{key:l.name,class:ne({selected:g.value.name===l.name}),onClick:r=>g.value=l},k(l.name),11,Kt)),64))]),t("div",Qt,[(u(),L(ve(g.value.component),{song:a.song},null,8,["song"]))])]))}});const Zt=a=>(G("data-v-de74bfbf"),a=a(),Y(),a),es={key:0,class:"editor"},ts=Zt(()=>t("span",{class:"material-symbols-rounded"},"arrow_back",-1)),ss={class:"preview"},os={key:0,class:"pages"},ns={class:""},as={class:"config"},ls=S({__name:"index",setup(a){const y=q(),_=_e(),e=ge();let g=_.params.id;if(!g){const m=y.addEmptySong();e.push({path:`/editor/${m}`,replace:!0}),g=String(m)}const b=y.song(g);b||e.push("/");const p=V(b),l=V(),r=()=>{if(!p.value)return;const m="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(p.value)),o=document.createElement("a");o.setAttribute("href",m),o.setAttribute("download",`${p.value.title}.chordsheets.json`),document.body.appendChild(o),o.click(),o.remove()};return(m,o)=>{const n=fe("router-link");return u(),L(oe,{minWidth:300},{default:R(()=>[p.value?(u(),d("div",es,[f(n,{to:"/",class:"back-button"},{default:R(()=>[ts]),_:1}),t("div",ss,[l.value?(u(),d("div",os,[w("",!0),t("span",{class:"material-symbols-rounded",onClick:o[2]||(o[2]=(...s)=>l.value.print&&l.value.print(...s))}," print "),t("span",{class:"material-symbols-rounded",onClick:o[3]||(o[3]=(...s)=>l.value.download&&l.value.download(...s))}," picture_as_pdf "),t("span",{class:"material-symbols-rounded",onClick:r}," file_download ")])):w("",!0),t("div",ns,[f(st,{song:p.value,ref_key:"preview",ref:l},null,8,["song"])])]),f(oe,{minWidth:1100,error:""},{default:R(()=>[t("div",as,[f(Xt,{song:p.value},null,8,["song"])])]),_:1})])):w("",!0)]),_:1})}}});const _s=B(ls,[["__scopeId","data-v-de74bfbf"]]);export{_s as default};
