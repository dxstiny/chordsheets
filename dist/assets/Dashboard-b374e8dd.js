import{d as B,r as h,w as D,a as E,c as b,b as s,e as r,u as _,f as k,F as x,g as T,o as v,t as f,h as q,i as N,p as $,j as U,k as j}from"./main-2531adf3.js";import{u as F,I as u,T as M,d as O,A as R,E as J}from"./vuedraggable.umd-82740782.js";import{D as z}from"./Dropdown-aee9e1e9.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-12cdf5e8.js";const m=p=>($("data-v-d4d83b72"),p=p(),U(),p),H={class:"dashboard"},K={class:"wrap"},Q=m(()=>s("h1",null,[j("Chord"),s("span",{class:"accent"},"Sheets")],-1)),W={class:"flex"},X=m(()=>s("hr",null,null,-1)),Y={class:"filters"},Z=m(()=>s("hr",null,null,-1)),ee={class:"song"},te={class:"cover"},se=["src"],oe={class:"info"},ne={class:"bpm"},ae={class:"key"},le=["onClick"],re=m(()=>s("aside",{class:"card min-h-screen sticky learn"},[s("div",{class:"content"},[s("h2",null,"Learn Music Theory"),s("p",null,"Coming soon...")])],-1)),ie={class:"void"},de={class:"parent"},ce=B({__name:"Dashboard",setup(p){const n=F(),g=h(),C=async()=>{await n.prepareRender();const e=JSON.stringify(n.songs,null,4),o=document.createElement("a"),l=new Blob([e],{type:"text/plain"});o.href=URL.createObjectURL(l),o.download="chordsheets.json",o.click()},S=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=o=>{var d;const l=(d=o.target.files)==null?void 0:d[0];if(!l)return;const t=new FileReader;t.onload=c=>{var w;const A=(w=c.target)==null?void 0:w.result,P=JSON.parse(A);n.songs=P},t.readAsText(l)},e.click()},y=async()=>{let e=new J({orientation:"portrait",unit:"px",format:"a4"});for(const o of g.value??[])await o.renderTo(e),o.song!==n.songs[n.songs.length-1]&&e.addPage();return e},I=async()=>{const e=await y();e.autoPrint(),e.output("dataurlnewwindow")},L=async()=>{(await y()).save("chordsheets.pdf")},a=h({artist:"",query:""}),i=h([]);D(()=>{i.value=n.songs.filter(e=>{if(a.value.artist&&a.value.artist!=="(any)"&&!e.artist.toLowerCase().includes(a.value.artist.toLowerCase()))return!1;const o=`${e.title} ${e.artist}`.toLowerCase();return!(a.value.query&&!o.includes(a.value.query.toLowerCase()))})});const V=({moved:e})=>{const o=n.songs.findIndex(c=>c.id===e.element.id),l=i.value[e.newIndex-1%i.value.length],t=l?n.songs.findIndex(c=>c.id===l.id):-1,d=e.newIndex>e.oldIndex?t:t+1;n.moveTo(o,d)};return(e,o)=>{const l=E("router-link");return v(),b(x,null,[s("div",H,[s("div",K,[s("main",null,[Q,s("div",W,[r(u,{icon:"add",label:"New Song",onClick:o[0]||(o[0]=t=>e.$router.push("/editor")),style:"green"}),r(u,{icon:"file_download",label:"Save Library",onClick:C,style:"yellow"}),r(u,{icon:"file_upload",label:"Import Library",onClick:S,style:"yellow"}),r(u,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:L,style:"blue"}),r(u,{label:"Print All",icon:"print",onClick:I,style:"blue"})]),X,s("div",Y,[r(M,{label:"Search",modelValue:a.value.query,"onUpdate:modelValue":o[1]||(o[1]=t=>a.value.query=t),placeholder:"Search for a song"},null,8,["modelValue"]),r(z,{label:"Artist",modelValue:a.value.artist,"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.artist=t),options:["(any)",...new Set(_(n).songs.map(t=>t.artist))]},null,8,["modelValue","options"])]),Z,r(_(O),{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=t=>i.value=t),class:"songs",onChange:V,"item-key":"id"},{item:k(({element:t})=>[r(l,{to:`/editor/${t.id}`},{default:k(()=>[s("div",ee,[s("div",te,[s("img",{src:t.cover||"placeholders/song.svg"},null,8,se)]),s("div",oe,[s("h2",null,f(t.title),1),s("span",null,f(t.artist),1)]),s("span",ne,f(t.bpm)+" BPM ",1),s("span",ae,f(t.key),1),s("span",{class:"material-symbols-rounded delete",onClick:q(d=>_(n).removeSong(t),["prevent"])}," delete ",8,le)])]),_:2},1032,["to"])]),_:1},8,["modelValue"])]),re])]),s("div",ie,[s("div",de,[(v(!0),b(x,null,T(_(n).songs,t=>(v(),N(R,{ref_for:!0,ref_key:"allPages",ref:g,song:t},null,8,["song"]))),256))])])],64)}}});const he=G(ce,[["__scopeId","data-v-d4d83b72"]]);export{he as default};
