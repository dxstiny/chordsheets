import{a as S,r as V,c as Z,f as u,g as p,h as t,t as b,m as E,l as w,F as $,j as x,n as ne,p as _,q as G,s as Y,_ as B,o as K,D as U,G as re,u as q,A as W,i as L,I as J,w as ue,J as ce,y as R,S as de,z as ee,K as z,L as pe,C as me,b as ve,B as ge}from"./main-xqxsP662.js";import{M as fe,m as _e}from"./MidiPreview-ClZrBbmD.js";import"./html2canvas.esm-CBrSDip1.js";import{a as he,E as ye,T as P,d as te}from"./dom-to-image-DIqK-UZv.js";import{D as H}from"./Dropdown-BClQDw_w.js";import{I as M}from"./IconButton-C3-LUI-H.js";import{s as be,c as oe}from"./inputListener-CMLiHA8t.js";import{M as se}from"./MinWidth-BeTqPmRr.js";import"./_commonjsHelpers-C4iS2aBk.js";const A=a=>(G("data-v-42d65bab"),a=a(),Y(),a),ke={key:0,class:"meta"},Ve={class:"wrap-to-line"},$e={class:"info"},we=A(()=>t("span",{class:"material-symbols-rounded"},"music_note",-1)),Ce={class:"info"},xe=A(()=>t("span",{class:"material-symbols-rounded"},"piano",-1)),Se={key:0,class:"info"},Ie={class:"material-symbols-rounded"},Pe={key:1,class:"info"},Ue={class:"material-symbols-rounded"},Ne={key:0,class:"info"},Ee=A(()=>t("span",{class:"material-symbols-rounded"}," check ",-1)),Me={class:"capitalise"},Be={key:0},Te={class:"instruments"},Oe={class:"instrument"},qe={class:"flex space-between"},je={class:"flex gap-2"},De=A(()=>t("span",{class:"material-symbols-rounded"},"volume_up",-1)),Re={class:"settings"},Ae={class:"muted"},Le={key:0},We={class:"structure"},Fe=A(()=>t("hr",null,null,-1)),Je=["id"],ze={class:"progression"},He=["onClick"],Ge=S({__name:"Page",props:{currentPage:{required:!0,type:Number},pages:{required:!0,type:Array},song:{required:!0,type:Object}},setup(a,{expose:k}){const g=a,e=V([]),f=V([]),h=V(),d=()=>[...e.value,...f.value],l=(n,o)=>{const c=new CustomEvent("chord-click",{detail:{sectionIndex:n,chordIndex:o}});window.dispatchEvent(c)};k({getSections:d});const r=n=>{let{type:o,name:c}=n;return o==="(other)"?c:o+(c?`: ${c}`:"")},m=Z(()=>{var n;return(n=g.pages[g.currentPage])==null?void 0:n.filter(o=>o==null?void 0:o.type)}),s=Z(()=>g.pages[g.currentPage].filter(n=>n==null?void 0:n.signature));return(n,o)=>{var c,v,C;return u(),p("div",{class:"page",ref_key:"page",ref:h},[a.currentPage==0?(u(),p("div",ke,[t("h2",null,b(a.song.artist),1),t("h1",null,b(a.song.title),1),t("div",Ve,[t("div",$e,[we,E(" "+b(a.song.bpm)+" BPM ",1)]),t("div",Ce,[xe,E(" "+b(a.song.key),1)]),a.song.transpose?(u(),p("div",Se,[t("span",Ie,b(a.song.transpose>0?"arrow_upward":"arrow_downward"),1),E(" "+b(a.song.transpose),1)])):w("",!0),a.song.octave?(u(),p("div",Pe,[t("span",Ue,b(a.song.octave>0?"arrow_upward":"arrow_downward"),1),E(" "+b(a.song.octave)+" octave ",1)])):w("",!0),(u(!0),p($,null,x((c=a.song.legacy)==null?void 0:c.options,(i,y)=>(u(),p($,null,[i?(u(),p("div",Ne,[Ee,t("span",Me,b(y),1)])):w("",!0)],64))),256))]),Object.keys(((v=a.song.legacy)==null?void 0:v.instruments)??{}).length?(u(),p("hr",Be)):w("",!0),t("div",Te,[(u(!0),p($,null,x((C=a.song.legacy)==null?void 0:C.instruments,(i,y)=>(u(),p("div",Oe,[t("div",qe,[t("span",null,b(y),1),t("span",je,[De,E(" "+b(i==null?void 0:i.volume),1)])]),t("div",Re,[t("h3",null,b(i==null?void 0:i.name),1),t("span",Ae,[E(b(i==null?void 0:i.type)+" ",1),i!=null&&i.page?(u(),p($,{key:0},[E(" | P"+b(i==null?void 0:i.page),1)],64)):w("",!0)])])]))),256))]),a.song.structure?(u(),p($,{key:1},[a.song.structure.length?(u(),p("hr",Le)):w("",!0),t("div",We,[(u(!0),p($,null,x(a.song.structure,i=>(u(),p("span",null,b(i),1))),256))])],64)):w("",!0),Fe])):w("",!0),(u(!0),p($,null,x(m.value,(i,y)=>(u(),p("div",{class:"section",ref_for:!0,ref_key:"sections",ref:e,id:String(y)},[t("span",null,b(r(i)),1),t("div",ze,[(u(!0),p($,null,x(i.progression,(I,N)=>(u(),p("div",{class:ne(["chord",`w-${I.duration}`+(I.selected?" selected":"")]),onClick:j=>l(y,N)},b(I.chord),11,He))),256))])],8,Je))),256)),a.song.midi?(u(!0),p($,{key:1},x(s.value,i=>{var y;return u(),p("div",{class:"section",ref_for:!0,ref_key:"midiSections",ref:f},[t("span",null,b(i==null?void 0:i.name),1),_(fe,{track:i,width:((y=h.value)==null?void 0:y.clientWidth)??400},null,8,["track","width"])],512)}),256)):w("",!0)],512)}}}),ae=B(Ge,[["__scopeId","data-v-42d65bab"]]),Ye={class:"wrap"},Ke=S({__name:"AllPages",props:{song:{required:!0,type:Object}},setup(a,{expose:k}){const g=a,e=V(),f=V(),h=V(),d=()=>{var v,C,i;const s=(v=f.value)==null?void 0:v[0];if(!s)return;const n=[],o=(i=(C=h.value)==null?void 0:C[0])==null?void 0:i.getSections();if(!o)return;const c=[...g.song.sections,...g.song.midi??[]];for(let y=0;y<o.length;y++){const I=o[y],N=c[y],j=I.getBoundingClientRect().bottom,T=(s==null?void 0:s.getBoundingClientRect().height)??0,D=Math.ceil(j/T)-1;if(!n[D]){n[D]=[N];continue}n[D].push(N)}m.value=n,m.value.length||m.value.push([null])};K(d),U(()=>g.song.sections.length,()=>{m.value=[[...g.song.sections,...g.song.midi??[]]],re(d)});const l=async s=>{if(!e.value)return s;const n=e.value.querySelectorAll(".parent__element");let o=n[0];const c=o.clientHeight/o.clientWidth;for(let i=0;i<m.value.length;i++){if(o=n[i],!o)continue;var v=s.internal.pageSize.getWidth(),C=s.internal.pageSize.getHeight();const y=2,I=await he.toJpeg(o,{height:o.offsetHeight*y,width:o.offsetWidth*y,style:{transform:`scale(${y}) translate(${o.offsetWidth/2/y}px, ${o.offsetHeight/2/y}px)`}});C=c*v,s.addImage(I,"JPG",0,0,v,C),i+1<m.value.length&&s.addPage()}return s},r=async()=>{const s=new ye({orientation:"portrait",unit:"px",format:"a4"});return await l(s),s},m=V([[...g.song.sections,...g.song.midi??[]]]);return m.value[0].length===0&&(m.value=[[null]]),k({render:r,renderTo:l,song:g.song}),(s,n)=>(u(),p("div",{ref_key:"allpageselement",ref:e,id:"allPages"},[(u(!0),p($,null,x(m.value,(o,c)=>(u(),p("div",{class:"print a4 parent__element",ref_for:!0,ref_key:"parent",ref:f},[t("div",Ye,[_(ae,{class:"page__element",ref_for:!0,ref_key:"element",ref:h,song:a.song,pages:m.value,currentPage:c},null,8,["song","pages","currentPage"])])],512))),256))],512))}}),Qe=B(Ke,[["__scopeId","data-v-b8c86e17"]]),Xe={class:"song printable"},Ze={class:"wrap"},et={class:"void"},tt=S({__name:"Song",props:{song:{required:!0,type:Object}},setup(a,{expose:k}){const g=q(),e=a,f=V(),h=V(),d=V(),l=V([[...e.song.sections,...e.song.midi??[]]]),r=V(0);K(()=>{var N,j;if(!d.value)return;const i=[],y=(N=h.value)==null?void 0:N.getSections();if(!y)return;const I=[...e.song.sections,...e.song.midi??[]];for(let T=0;T<y.length;T++){const D=y[T],X=I[T],le=D.getBoundingClientRect().bottom,ie=((j=d.value)==null?void 0:j.getBoundingClientRect().bottom)??0,F=Math.ceil(le/ie)-1;if(!i[F]){i[F]=[X];continue}i[F].push(X)}l.value=i,l.value.length||l.value.push([null])});const m=()=>{r.value+1>=l.value.length||r.value++},s=()=>{r.value-1<0||r.value--},n=()=>r.value+1,o=()=>l.value.length,c=async()=>{var i;return await((i=f.value)==null?void 0:i.render())};return k({nextPage:m,prevPage:s,getCurrentPage:n,getTotalPages:o,download:async()=>{await g.prepareRender();const i=await c();i&&i.save(`${e.song.title}.pdf`)},print:async()=>{await g.prepareRender();const i=await c();i&&(i.autoPrint(),window.open(i.output("bloburl"),"_blank"))}}),(i,y)=>(u(),p("div",{class:"parent",ref_key:"element",ref:d},[t("div",Xe,[t("div",Ze,[_(Qe,{ref_key:"allPages",ref:f,song:a.song},null,8,["song"])])]),t("div",et,[_(ae,{ref_key:"mainPage",ref:h,song:a.song,pages:l.value,currentPage:r.value},null,8,["song","pages","currentPage"])])],512))}}),ot=B(tt,[["__scopeId","data-v-fb9a3e9a"]]),st={class:"input"},nt={key:0},at=["value","max","min"],lt=S({__name:"NumberInput",props:{modelValue:{required:!0,type:Number},max:{required:!1,type:Number},min:{required:!1,type:Number},label:{required:!1,type:String}},emits:["update:modelValue"],setup(a,{emit:k}){const g=k,e=f=>{const h=f.target.value;g("update:modelValue",Number(h))};return(f,h)=>(u(),p("div",st,[a.label?(u(),p("h2",nt,b(a.label),1)):w("",!0),t("input",{value:a.modelValue,onInput:e,class:"textinput",type:"number",max:a.max,min:a.min},null,40,at)]))}}),O=B(lt,[["__scopeId","data-v-a474a2f7"]]),it={class:"material-symbols-rounded"},rt={key:0},ut=S({__name:"Checkbox",props:{modelValue:{required:!0,type:Boolean},label:{required:!1,type:String}},emits:["update:modelValue"],setup(a,{emit:k}){const g=k,e=f=>{g("update:modelValue",f)};return(f,h)=>(u(),p("div",{class:"input",onClick:h[0]||(h[0]=d=>e(!a.modelValue))},[t("span",it,b(a.modelValue?"check_box":"check_box_outline_blank"),1),a.label?(u(),p("h2",rt,b(a.label),1)):w("",!0)]))}}),ct=B(ut,[["__scopeId","data-v-96cc0e53"]]),dt={class:"group"},pt=t("h2",null,"Options",-1),mt={class:"content"},vt={class:"group"},gt=t("div",{class:"flex space-between"},[t("h2",null,"Instruments")],-1),ft={class:"content"},_t={class:"group"},ht={class:"flex end"},yt=["onClick"],bt={class:"content"},kt={class:"flex"},Vt=S({__name:"Instrument",props:{song:{required:!0,type:Object}},setup(a){const k=q(),g=a;U(()=>g.song,d=>{d&&(e.value=d)});const e=V(g.song),f=d=>{if(["l","r1","r2"].includes(d)&&!e.value.instruments[d]){e.value.instruments[d]={type:J[0],name:J[0],volume:100,page:1};return}};U(()=>e.value,d=>{d&&k.updateSong(d)});const h=V({});return window.addEventListener("click",d=>{let l=d.target;for(let s=0;s<5;s++){if(!l)return;if(l.classList.contains("group")||!l.parentElement)break;l=l.parentElement}if(!l)return;const[r,m]=l.id.split(".");for(let s=0;s<e.value.sections.length;s++){const n=e.value.sections[s];for(let o=0;o<n.progression.length;o++){if(s===Number(r)&&o===Number(m))continue;const c=n.progression[o];delete c.selected}}}),window.addEventListener("chord-click",d=>{const{sectionIndex:l,chordIndex:r}=d.detail,m=`${l}.${r}`,s=()=>{var n;(n=document.getElementById(m))==null||n.scrollIntoView({behavior:"smooth",block:"center"})};if(!h.value.sections){h.value.sections=!0,setTimeout(s,10);return}s()}),(d,l)=>(u(),p($,null,[t("div",dt,[pt,t("div",mt,[(u(!0),p($,null,x(e.value.options,(r,m)=>(u(),W(ct,{modelValue:e.value.options[m],"onUpdate:modelValue":s=>e.value.options[m]=s,label:m},null,8,["modelValue","onUpdate:modelValue","label"]))),256))])]),t("div",vt,[gt,t("div",ft,[(u(!0),p($,null,x(Object.keys(e.value.instruments),r=>(u(),p("div",_t,[t("h2",null,b(r),1),t("div",ht,[t("span",{onClick:m=>delete e.value.instruments[r],class:"material-symbols-rounded"}," - ",8,yt)]),t("div",bt,[_(P,{modelValue:e.value.instruments[r].name,"onUpdate:modelValue":m=>e.value.instruments[r].name=m,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),_(O,{modelValue:e.value.instruments[r].volume,"onUpdate:modelValue":m=>e.value.instruments[r].volume=m,min:0,max:127,label:"volume"},null,8,["modelValue","onUpdate:modelValue"]),_(O,{modelValue:e.value.instruments[r].page,"onUpdate:modelValue":m=>e.value.instruments[r].page=m,label:"page"},null,8,["modelValue","onUpdate:modelValue"]),_(H,{modelValue:e.value.instruments[r].type,"onUpdate:modelValue":m=>e.value.instruments[r].type=m,options:L(J),label:"type"},null,8,["modelValue","onUpdate:modelValue","options"])])]))),256))]),t("div",kt,[(u(),p($,null,x(["l","r1","r2"],r=>ue(_(M,{onClick:m=>f(r),icon:"add",label:"Add "+r},null,8,["onClick","label"]),[[ce,!e.value.instruments[r]]])),64))])])],64))}}),$t=S({__name:"Metadata",props:{song:{required:!0,type:Object}},setup(a){const k=q(),g=a;U(()=>g.song,d=>{d&&(e.value=d)});const e=V(g.song);U(()=>e.value,d=>{d&&k.updateSong(d)});const f=async()=>{var s;if(!e.value.artist||!e.value.title)return;const d=`artist:${e.value.artist} track:${e.value.title}`,m=(s=(await(await fetch("http://localhost:1234/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:d,scope:["spotify"]})})).json()).spotifyTracks)==null?void 0:s[0];m&&(e.value.spotify=m.url,e.value.cover=m.cover,h())},h=async()=>{if(console.log("getMetadata"),!e.value.spotify)return;e.value.spotify.includes("?")&&(e.value.spotify=e.value.spotify.split("?")[0]);const l=await(await fetch("http://localhost:1234/api/spotify/meta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceFetch:!0,spotifyId:e.value.spotify.split("/").pop()})})).json();e.value.bpm=Math.round(l.spotify.features.tempo),e.value.key=l.spotify.features.key+(l.spotify.features.mode==="Minor"?"m":"")};return(d,l)=>(u(),p($,null,[_(P,{modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=r=>e.value.title=r),label:"title",onChange:f},null,8,["modelValue"]),_(P,{modelValue:e.value.artist,"onUpdate:modelValue":l[1]||(l[1]=r=>e.value.artist=r),label:"artist",onChange:f},null,8,["modelValue"]),_(P,{modelValue:e.value.spotify,"onUpdate:modelValue":l[2]||(l[2]=r=>e.value.spotify=r),label:"Spotify Link",onChange:h,buttonIcon:"search",onButtonClick:f},null,8,["modelValue"]),_(P,{modelValue:e.value.key,"onUpdate:modelValue":l[3]||(l[3]=r=>e.value.key=r),label:"key"},null,8,["modelValue"]),_(O,{modelValue:e.value.bpm,"onUpdate:modelValue":l[4]||(l[4]=r=>e.value.bpm=r),min:0,label:"bpm"},null,8,["modelValue"]),_(O,{modelValue:e.value.transpose,"onUpdate:modelValue":l[5]||(l[5]=r=>e.value.transpose=r),min:-12,max:12,label:"transpose"},null,8,["modelValue"]),_(O,{modelValue:e.value.octave,"onUpdate:modelValue":l[6]||(l[6]=r=>e.value.octave=r),min:-1,max:1,label:"octave"},null,8,["modelValue"])],64))}}),Q=a=>(G("data-v-83d7eaa8"),a=a(),Y(),a),wt={class:"group"},Ct=Q(()=>t("h2",null,"Structure",-1)),xt={class:"content"},St={class:"group"},It={class:"flex space-between"},Pt=Q(()=>t("h2",null,"Sections",-1)),Ut={class:"group section"},Nt={class:"flex space-between"},Et={class:"flex"},Mt=["onClick"],Bt={class:"content"},Tt=["onClick","id"],Ot={class:"flex end"},qt=["onClick"],jt={class:"content flex-row"},Dt={class:"group"},Rt=Q(()=>t("h2",null,"Melodies",-1)),At={class:"content"},Lt={class:"group"},Wt={class:"flex"},Ft=S({__name:"Structure",props:{song:{required:!0,type:Object}},setup(a){const k=q(),g=a;U(()=>g.song,s=>{s&&(e.value=s)});const e=V(g.song);U(()=>e.value,s=>{s&&k.updateSong(s)});const f=V({});window.addEventListener("click",s=>{let n=s.target;for(let v=0;v<5;v++){if(!n)return;if(n.classList.contains("group")||!n.parentElement)break;n=n.parentElement}if(!n)return;const[o,c]=n.id.split(".");for(let v=0;v<e.value.sections.length;v++){const C=e.value.sections[v];for(let i=0;i<C.progression.length;i++){if(v===Number(o)&&i===Number(c))continue;const y=C.progression[i];delete y.selected}}}),window.addEventListener("chord-click",s=>{const{sectionIndex:n,chordIndex:o}=s.detail,c=`${n}.${o}`,v=()=>{var C;(C=document.getElementById(c))==null||C.scrollIntoView({behavior:"smooth",block:"center"})};if(!f.value.sections){f.value.sections=!0,setTimeout(v,10);return}v()});const h=s=>{e.value.midi&&e.value.midi.splice(s,1)},d=async()=>new Promise((s,n)=>{const o=document.createElement("input");o.type="file",o.accept=".mid",o.onchange=async()=>{if(!o.files){n();return}const c=o.files[0],v=await _e(c);if(!v){n();return}s(v)},o.click()}),l=async s=>{const n=await d();n&&e.value.midi&&(e.value.midi[s]=n)},r=async()=>{e.value.midi||(e.value.midi=[]);const s=await d();s&&e.value.midi.push(s)},m=s=>{const n=oe.value.includes("detected")?e.value.key:oe.value;s.progression.push({chord:n,duration:4,id:Math.random().toString(36)})};return K(()=>{be()}),(s,n)=>(u(),p($,null,[t("div",wt,[Ct,t("div",xt,[(u(!0),p($,null,x(e.value.structure,(o,c)=>(u(),W(H,{modelValue:e.value.structure[c],"onUpdate:modelValue":[v=>e.value.structure[c]=v,v=>{v==="(none)"&&e.value.structure.splice(c,1)}],options:[...e.value.sections.map(v=>String(v.type)),"(none)"],label:"section"},null,8,["modelValue","onUpdate:modelValue","options"]))),256))]),_(M,{onClick:n[0]||(n[0]=o=>e.value.structure.push("")),icon:"add",label:"add section"})]),t("div",St,[t("div",It,[Pt,t("span",{class:"material-symbols-rounded",onClick:n[1]||(n[1]=o=>f.value.sections=!f.value.sections)},b(f.value.sections?"expand_less":"expand_more"),1)]),f.value.sections?(u(),p($,{key:0},[_(L(te),{modelValue:e.value.sections,"onUpdate:modelValue":n[3]||(n[3]=o=>e.value.sections=o),class:"content","item-key":"id",onDragover:n[4]||(n[4]=ee(()=>{},["stop"]))},{item:R(({element:o})=>[t("div",Ut,[t("div",Nt,[t("div",Et,[_(H,{modelValue:o.type,"onUpdate:modelValue":c=>o.type=c,options:L(de),label:"type"},null,8,["modelValue","onUpdate:modelValue","options"]),_(P,{modelValue:o.name,"onUpdate:modelValue":c=>o.name=c,label:"name"},null,8,["modelValue","onUpdate:modelValue"])]),t("span",{onClick:c=>e.value.sections.splice(e.value.sections.indexOf(o),1),class:"material-symbols-rounded"}," delete ",8,Mt)]),t("div",Bt,[_(L(te),{modelValue:o.progression,"onUpdate:modelValue":c=>o.progression=c,class:"content","item-key":o.id,onDragover:n[2]||(n[2]=ee(()=>{},["stop"]))},{item:R(({element:c})=>[t("div",{class:"group chord",onClick:v=>c.selected=!0,id:e.value.sections.indexOf(o)+"."+o.progression.indexOf(c)},[t("div",Ot,[t("span",{onClick:v=>o.progression.splice(o.progression.indexOf(c),1),class:"material-symbols-rounded"},"-",8,qt)]),t("div",jt,[_(P,{modelValue:c.chord,"onUpdate:modelValue":v=>c.chord=v,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),_(O,{modelValue:c.duration,"onUpdate:modelValue":v=>c.duration=v,min:1,label:"duration"},null,8,["modelValue","onUpdate:modelValue"])])],8,Tt)]),_:2},1032,["modelValue","onUpdate:modelValue","item-key"])]),_(M,{onClick:c=>m(o),icon:"add",label:"add chord"},null,8,["onClick"])])]),_:1},8,["modelValue"]),_(M,{onClick:n[5]||(n[5]=o=>e.value.sections.push({type:"chorus",progression:[],id:Math.random().toString(36)})),icon:"add",label:"add section"})],64)):w("",!0)]),t("div",Dt,[Rt,t("div",At,[(u(!0),p($,null,x(a.song.midi,(o,c)=>(u(),p("div",Lt,[_(P,{modelValue:o.name,"onUpdate:modelValue":v=>o.name=v,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),t("div",Wt,[_(M,{onClick:v=>h(c),icon:"delete",label:"delete"},null,8,["onClick"]),_(M,{onClick:v=>l(c),icon:"sync",label:"replace"},null,8,["onClick"])])]))),256))]),_(M,{onClick:r,icon:"add",label:"add"})])],64))}}),Jt=B(Ft,[["__scopeId","data-v-83d7eaa8"]]),zt={class:"settings"},Ht={key:0,class:"spotify"},Gt=["src"],Yt={class:"tabs flex space-between"},Kt=["onClick"],Qt={class:"configuration"},Xt=S({__name:"Editor",props:{song:{required:!0,type:Object}},setup(a){q();const k=a;U(()=>k.song,h=>{h&&(g.value=h)});const g=V(k.song),e=[{name:"metadata",component:z($t)},{name:"instrument",component:z(Vt)},{name:"sections",component:z(Jt)}],f=V(e[0]);return(h,d)=>(u(),p("div",zt,[g.value.spotify?(u(),p("div",Ht,[t("iframe",{src:`https://open.spotify.com/embed/track/${g.value.spotify.split("/").pop()}`,width:"100%",height:"80",frameborder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,Gt)])):w("",!0),t("div",Yt,[(u(),p($,null,x(e,l=>t("label",{key:l.name,class:ne({selected:f.value.name===l.name}),onClick:r=>f.value=l},b(l.name),11,Kt)),64))]),t("div",Qt,[(u(),W(pe(f.value.component),{song:a.song},null,8,["song"]))])]))}}),Zt=a=>(G("data-v-de74bfbf"),a=a(),Y(),a),eo={key:0,class:"editor"},to=Zt(()=>t("span",{class:"material-symbols-rounded"},"arrow_back",-1)),oo={class:"preview"},so={key:0,class:"pages"},no={class:""},ao={class:"config"},lo=S({__name:"index",setup(a){const k=q(),g=me(),e=ve();let f=g.params.id;if(!f){const m=k.addEmptySong();e.push({path:`/editor/${m}`,replace:!0}),f=String(m)}const h=k.song(f);h||e.push("/");const d=V(h),l=V(),r=()=>{if(!d.value)return;const m="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(d.value)),s=document.createElement("a");s.setAttribute("href",m),s.setAttribute("download",`${d.value.title}.chordsheets.json`),document.body.appendChild(s),s.click(),s.remove()};return(m,s)=>{const n=ge("router-link");return u(),W(se,{minWidth:300},{default:R(()=>[d.value?(u(),p("div",eo,[_(n,{to:"/",class:"back-button"},{default:R(()=>[to]),_:1}),t("div",oo,[l.value?(u(),p("div",so,[w("",!0),t("span",{class:"material-symbols-rounded",onClick:s[2]||(s[2]=(...o)=>l.value.print&&l.value.print(...o))}," print "),t("span",{class:"material-symbols-rounded",onClick:s[3]||(s[3]=(...o)=>l.value.download&&l.value.download(...o))}," picture_as_pdf "),t("span",{class:"material-symbols-rounded",onClick:r}," file_download ")])):w("",!0),t("div",no,[_(ot,{song:d.value,ref_key:"preview",ref:l},null,8,["song"])])]),_(se,{minWidth:1100,error:""},{default:R(()=>[t("div",ao,[_(Xt,{song:d.value},null,8,["song"])])]),_:1})])):w("",!0)]),_:1})}}}),_o=B(lo,[["__scopeId","data-v-de74bfbf"]]);export{_o as default};
