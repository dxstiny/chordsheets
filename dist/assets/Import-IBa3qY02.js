import{d as x,u as k,r as d,o as I,c as O,a as l,t as v,h as f,f as C,b as a,_ as B}from"./main-DZED5YHt.js";import{I as i}from"./IconButton-CfLmXCMC.js";const N={class:"actions"},S=x({__name:"Import",setup(V,{expose:m}){const s=k(),t=d([]),r=d(),y=()=>{t.value=[];const o=document.createElement("input");o.type="file",o.accept=".json",o.onchange=e=>{var u;const n=(u=e.target.files)==null?void 0:u[0];if(!n)return;const c=new FileReader;c.onload=b=>{var p;const h=(p=b.target)==null?void 0:p.result,g=JSON.parse(h);if(!s.songs.length){s.songs=g;return}t.value=g,r.value.showModal()},c.readAsText(n)},o.click()},_=()=>{for(const o of t.value){const e=s.songs.find(n=>n.title===o.title&&n.artist===o.artist);e?Object.assign(e,o):s.songs.push(o)}t.value=[],r.value.close()},w=()=>{s.songs=t.value,t.value=[],r.value.close()};return m({show:y}),(o,e)=>(I(),O("dialog",{ref_key:"addOrOverwrite",ref:r},[l("h1",null,v(t.value.length)+" songs to import",1),l("p",null,[f(" You already have "+v(C(s).songs.length)+" songs in your library. ",1),e[1]||(e[1]=l("br",null,null,-1)),e[2]||(e[2]=f(" Do you want to merge the libraries songs or overwrite the existing one? "))]),l("div",N,[a(i,{label:"Cancel",icon:"close",style:"red",onClick:e[0]||(e[0]=n=>r.value.close())}),a(i,{label:"Merge",icon:"merge",onClick:_}),a(i,{label:"Overwrite",icon:"sync_problem",style:"yellow",onClick:w})])],512))}}),E=B(S,[["__scopeId","data-v-c192c0a9"]]);export{E as I};
