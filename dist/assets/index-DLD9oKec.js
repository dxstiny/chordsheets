import{d as S,r as V,s as G,o as d,c as m,a as n,t as b,h as N,g as C,F as w,i as x,p as ee,b as _,_ as B,x as H,v as U,A as se,u as q,e as L,f as A,I as F,B as le,C as ae,k as R,S as ie,l as K,D as z,E as re,z as ue,m as de,n as ce}from"./main-DSnlyUdv.js";import{M as pe,m as me}from"./MidiPreview-DQRrIflq.js";import"./html2canvas.esm-CBrSDip1.js";import{d as ve,E as ge}from"./dom-to-image-cKgm5kKk.js";import{T as I}from"./TextInput-p-bbAW5u.js";import{D as J}from"./Dropdown-B6tFHCVt.js";import{I as M}from"./IconButton-BdeipojU.js";import{d as Q}from"./vuedraggable.umd-DbPxORnL.js";import{s as fe,c as X}from"./inputListener-DtuvMXzi.js";import{M as Z}from"./MinWidth-qR36hj4s.js";/* empty css                                                                 *//* empty css                                                                   */const _e={key:0,class:"meta"},he={class:"wrap-to-line"},ye={class:"info"},be={class:"info"},ke={key:0,class:"info"},Ve={class:"material-symbols-rounded"},we={key:1,class:"info"},$e={class:"material-symbols-rounded"},Ce={key:0,class:"info"},xe={class:"capitalise"},Se={key:0},Pe={class:"instruments"},Ie={class:"instrument"},Ue={class:"flex space-between"},Ee={class:"flex gap-2"},Ne={class:"settings"},Me={class:"muted"},Be={key:0},Te={class:"structure"},Oe=["id"],qe={class:"progression"},je=["onClick"],De=S({__name:"Page",props:{currentPage:{required:!0,type:Number},pages:{required:!0,type:Array},song:{required:!0,type:Object}},setup(r,{expose:k}){const g=r,e=V([]),f=V([]),h=V(),c=()=>[...e.value,...f.value],l=(s,t)=>{const u=new CustomEvent("chord-click",{detail:{sectionIndex:s,chordIndex:t}});window.dispatchEvent(u)};k({getSections:c});const i=s=>{let{type:t,name:u}=s;return t==="(other)"?u:t+(u?`: ${u}`:"")},p=G(()=>{var s;return(s=g.pages[g.currentPage])==null?void 0:s.filter(t=>t==null?void 0:t.type)}),o=G(()=>g.pages[g.currentPage].filter(s=>s==null?void 0:s.signature));return(s,t)=>{var u,v,$;return d(),m("div",{class:"page",ref_key:"page",ref:h},[r.currentPage==0?(d(),m("div",_e,[n("h2",null,b(r.song.artist),1),n("h1",null,b(r.song.title),1),n("div",he,[n("div",ye,[t[0]||(t[0]=n("span",{class:"material-symbols-rounded"},"music_note",-1)),N(" "+b(r.song.bpm)+" BPM ",1)]),n("div",be,[t[1]||(t[1]=n("span",{class:"material-symbols-rounded"},"piano",-1)),N(" "+b(r.song.key),1)]),r.song.transpose?(d(),m("div",ke,[n("span",Ve,b(r.song.transpose>0?"arrow_upward":"arrow_downward"),1),N(" "+b(r.song.transpose),1)])):C("",!0),r.song.octave?(d(),m("div",we,[n("span",$e,b(r.song.octave>0?"arrow_upward":"arrow_downward"),1),N(" "+b(r.song.octave)+" octave ",1)])):C("",!0),(d(!0),m(w,null,x((u=r.song.legacy)==null?void 0:u.options,(a,y)=>(d(),m(w,null,[a?(d(),m("div",Ce,[t[2]||(t[2]=n("span",{class:"material-symbols-rounded"}," check ",-1)),n("span",xe,b(y),1)])):C("",!0)],64))),256))]),Object.keys(((v=r.song.legacy)==null?void 0:v.instruments)??{}).length?(d(),m("hr",Se)):C("",!0),n("div",Pe,[(d(!0),m(w,null,x(($=r.song.legacy)==null?void 0:$.instruments,(a,y)=>(d(),m("div",Ie,[n("div",Ue,[n("span",null,b(y),1),n("span",Ee,[t[3]||(t[3]=n("span",{class:"material-symbols-rounded"},"volume_up",-1)),N(" "+b(a==null?void 0:a.volume),1)])]),n("div",Ne,[n("h3",null,b(a==null?void 0:a.name),1),n("span",Me,[N(b(a==null?void 0:a.type)+" ",1),a!=null&&a.page?(d(),m(w,{key:0},[N(" | P"+b(a==null?void 0:a.page),1)],64)):C("",!0)])])]))),256))]),r.song.structure?(d(),m(w,{key:1},[r.song.structure.length?(d(),m("hr",Be)):C("",!0),n("div",Te,[(d(!0),m(w,null,x(r.song.structure,a=>(d(),m("span",null,b(a),1))),256))])],64)):C("",!0),t[4]||(t[4]=n("hr",null,null,-1))])):C("",!0),(d(!0),m(w,null,x(p.value,(a,y)=>(d(),m("div",{class:"section",ref_for:!0,ref_key:"sections",ref:e,id:String(y)},[n("span",null,b(i(a)),1),n("div",qe,[(d(!0),m(w,null,x(a.progression,(P,E)=>(d(),m("div",{class:ee(["chord",`w-${P.duration}`+(P.selected?" selected":"")]),onClick:j=>l(y,E)},b(P.chord),11,je))),256))])],8,Oe))),256)),r.song.midi?(d(!0),m(w,{key:1},x(o.value,a=>{var y;return d(),m("div",{class:"section",ref_for:!0,ref_key:"midiSections",ref:f},[n("span",null,b(a==null?void 0:a.name),1),_(pe,{track:a,width:((y=h.value)==null?void 0:y.clientWidth)??400},null,8,["track","width"])],512)}),256)):C("",!0)],512)}}}),te=B(De,[["__scopeId","data-v-42d65bab"]]),Re={class:"wrap"},Ae=S({__name:"AllPages",props:{song:{required:!0,type:Object}},setup(r,{expose:k}){const g=r,e=V(),f=V(),h=V(),c=()=>{var v,$,a;const o=(v=f.value)==null?void 0:v[0];if(!o)return;const s=[],t=(a=($=h.value)==null?void 0:$[0])==null?void 0:a.getSections();if(!t)return;const u=[...g.song.sections,...g.song.midi??[]];for(let y=0;y<t.length;y++){const P=t[y],E=u[y],j=P.getBoundingClientRect().bottom,T=(o==null?void 0:o.getBoundingClientRect().height)??0,D=Math.ceil(j/T)-1;if(!s[D]){s[D]=[E];continue}s[D].push(E)}p.value=s,p.value.length||p.value.push([null])};H(c),U(()=>g.song.sections.length,()=>{p.value=[[...g.song.sections,...g.song.midi??[]]],se(c)});const l=async o=>{if(!e.value)return o;const s=e.value.querySelectorAll(".parent__element");let t=s[0];const u=t.clientHeight/t.clientWidth;for(let a=0;a<p.value.length;a++){if(t=s[a],!t)continue;var v=o.internal.pageSize.getWidth(),$=o.internal.pageSize.getHeight();const y=2,P=await ve.toJpeg(t,{height:t.offsetHeight*y,width:t.offsetWidth*y,style:{transform:`scale(${y}) translate(${t.offsetWidth/2/y}px, ${t.offsetHeight/2/y}px)`}});$=u*v,o.addImage(P,"JPG",0,0,v,$),a+1<p.value.length&&o.addPage()}return o},i=async()=>{const o=new ge({orientation:"portrait",unit:"px",format:"a4"});return await l(o),o},p=V([[...g.song.sections,...g.song.midi??[]]]);return p.value[0].length===0&&(p.value=[[null]]),k({render:i,renderTo:l,song:g.song}),(o,s)=>(d(),m("div",{ref_key:"allpageselement",ref:e,id:"allPages"},[(d(!0),m(w,null,x(p.value,(t,u)=>(d(),m("div",{class:"print a4 parent__element",ref_for:!0,ref_key:"parent",ref:f},[n("div",Re,[_(te,{class:"page__element",ref_for:!0,ref_key:"element",ref:h,song:r.song,pages:p.value,currentPage:u},null,8,["song","pages","currentPage"])])],512))),256))],512))}}),Le=B(Ae,[["__scopeId","data-v-b8c86e17"]]),We={class:"song printable"},Fe={class:"wrap"},ze={class:"void"},Je=S({__name:"Song",props:{song:{required:!0,type:Object}},setup(r,{expose:k}){const g=q(),e=r,f=V(),h=V(),c=V(),l=V([[...e.song.sections,...e.song.midi??[]]]),i=V(0);H(()=>{var E,j;if(!c.value)return;const a=[],y=(E=h.value)==null?void 0:E.getSections();if(!y)return;const P=[...e.song.sections,...e.song.midi??[]];for(let T=0;T<y.length;T++){const D=y[T],Y=P[T],ne=D.getBoundingClientRect().bottom,oe=((j=c.value)==null?void 0:j.getBoundingClientRect().bottom)??0,W=Math.ceil(ne/oe)-1;if(!a[W]){a[W]=[Y];continue}a[W].push(Y)}l.value=a,l.value.length||l.value.push([null])});const p=()=>{i.value+1>=l.value.length||i.value++},o=()=>{i.value-1<0||i.value--},s=()=>i.value+1,t=()=>l.value.length,u=async()=>{var a;return await((a=f.value)==null?void 0:a.render())};return k({nextPage:p,prevPage:o,getCurrentPage:s,getTotalPages:t,download:async()=>{await g.prepareRender();const a=await u();a&&a.save(`${e.song.title}.pdf`)},print:async()=>{await g.prepareRender();const a=await u();a&&(a.autoPrint(),window.open(a.output("bloburl"),"_blank"))}}),(a,y)=>(d(),m("div",{class:"parent",ref_key:"element",ref:c},[n("div",We,[n("div",Fe,[_(Le,{ref_key:"allPages",ref:f,song:r.song},null,8,["song"])])]),n("div",ze,[_(te,{ref_key:"mainPage",ref:h,song:r.song,pages:l.value,currentPage:i.value},null,8,["song","pages","currentPage"])])],512))}}),He=B(Je,[["__scopeId","data-v-fb9a3e9a"]]),Ye={class:"input"},Ge={key:0},Ke=["value","max","min"],Qe=S({__name:"NumberInput",props:{modelValue:{required:!0,type:Number},max:{required:!1,type:Number},min:{required:!1,type:Number},label:{required:!1,type:String}},emits:["update:modelValue"],setup(r,{emit:k}){const g=k,e=f=>{const h=f.target.value;g("update:modelValue",Number(h))};return(f,h)=>(d(),m("div",Ye,[r.label?(d(),m("h2",Ge,b(r.label),1)):C("",!0),n("input",{value:r.modelValue,onInput:e,class:"textinput",type:"number",max:r.max,min:r.min},null,40,Ke)]))}}),O=B(Qe,[["__scopeId","data-v-a474a2f7"]]),Xe={class:"material-symbols-rounded"},Ze={key:0},et=S({__name:"Checkbox",props:{modelValue:{required:!0,type:Boolean},label:{required:!1,type:String}},emits:["update:modelValue"],setup(r,{emit:k}){const g=k,e=f=>{g("update:modelValue",f)};return(f,h)=>(d(),m("div",{class:"input",onClick:h[0]||(h[0]=c=>e(!r.modelValue))},[n("span",Xe,b(r.modelValue?"check_box":"check_box_outline_blank"),1),r.label?(d(),m("h2",Ze,b(r.label),1)):C("",!0)]))}}),tt=B(et,[["__scopeId","data-v-96cc0e53"]]),nt={class:"group"},ot={class:"content"},st={class:"group"},lt={class:"content"},at={class:"group"},it={class:"flex end"},rt=["onClick"],ut={class:"content"},dt={class:"flex"},ct=S({__name:"Instrument",props:{song:{required:!0,type:Object}},setup(r){const k=q(),g=r;U(()=>g.song,c=>{c&&(e.value=c)});const e=V(g.song),f=c=>{if(["l","r1","r2"].includes(c)&&!e.value.instruments[c]){e.value.instruments[c]={type:F[0],name:F[0],volume:100,page:1};return}};U(()=>e.value,c=>{c&&k.updateSong(c)});const h=V({});return window.addEventListener("click",c=>{let l=c.target;for(let o=0;o<5;o++){if(!l)return;if(l.classList.contains("group")||!l.parentElement)break;l=l.parentElement}if(!l)return;const[i,p]=l.id.split(".");for(let o=0;o<e.value.sections.length;o++){const s=e.value.sections[o];for(let t=0;t<s.progression.length;t++){if(o===Number(i)&&t===Number(p))continue;const u=s.progression[t];delete u.selected}}}),window.addEventListener("chord-click",c=>{const{sectionIndex:l,chordIndex:i}=c.detail,p=`${l}.${i}`,o=()=>{var s;(s=document.getElementById(p))==null||s.scrollIntoView({behavior:"smooth",block:"center"})};if(!h.value.sections){h.value.sections=!0,setTimeout(o,10);return}o()}),(c,l)=>(d(),m(w,null,[n("div",nt,[l[0]||(l[0]=n("h2",null,"Options",-1)),n("div",ot,[(d(!0),m(w,null,x(e.value.options,(i,p)=>(d(),L(tt,{modelValue:e.value.options[p],"onUpdate:modelValue":o=>e.value.options[p]=o,label:p},null,8,["modelValue","onUpdate:modelValue","label"]))),256))])]),n("div",st,[l[1]||(l[1]=n("div",{class:"flex space-between"},[n("h2",null,"Instruments")],-1)),n("div",lt,[(d(!0),m(w,null,x(Object.keys(e.value.instruments),i=>(d(),m("div",at,[n("h2",null,b(i),1),n("div",it,[n("span",{onClick:p=>delete e.value.instruments[i],class:"material-symbols-rounded"}," - ",8,rt)]),n("div",ut,[_(I,{modelValue:e.value.instruments[i].name,"onUpdate:modelValue":p=>e.value.instruments[i].name=p,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),_(O,{modelValue:e.value.instruments[i].volume,"onUpdate:modelValue":p=>e.value.instruments[i].volume=p,min:0,max:127,label:"volume"},null,8,["modelValue","onUpdate:modelValue"]),_(O,{modelValue:e.value.instruments[i].page,"onUpdate:modelValue":p=>e.value.instruments[i].page=p,label:"page"},null,8,["modelValue","onUpdate:modelValue"]),_(J,{modelValue:e.value.instruments[i].type,"onUpdate:modelValue":p=>e.value.instruments[i].type=p,options:A(F),label:"type"},null,8,["modelValue","onUpdate:modelValue","options"])])]))),256))]),n("div",dt,[(d(),m(w,null,x(["l","r1","r2"],i=>le(_(M,{onClick:p=>f(i),icon:"add",label:"Add "+i},null,8,["onClick","label"]),[[ae,!e.value.instruments[i]]])),64))])])],64))}}),pt=S({__name:"Metadata",props:{song:{required:!0,type:Object}},setup(r){const k=q(),g=r;U(()=>g.song,c=>{c&&(e.value=c)});const e=V(g.song);U(()=>e.value,c=>{c&&k.updateSong(c)});const f=async()=>{var o;if(!e.value.artist||!e.value.title)return;const c=`artist:${e.value.artist} track:${e.value.title}`,p=(o=(await(await fetch("http://localhost:1234/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:c,scope:["spotify"]})})).json()).spotifyTracks)==null?void 0:o[0];p&&(e.value.spotify=p.url,e.value.cover=p.cover,h())},h=async()=>{if(console.log("getMetadata"),!e.value.spotify)return;e.value.spotify.includes("?")&&(e.value.spotify=e.value.spotify.split("?")[0]);const l=await(await fetch("http://localhost:1234/api/spotify/meta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceFetch:!0,spotifyId:e.value.spotify.split("/").pop()})})).json();e.value.bpm=Math.round(l.spotify.features.tempo),e.value.key=l.spotify.features.key+(l.spotify.features.mode==="Minor"?"m":"")};return(c,l)=>(d(),m(w,null,[_(I,{modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=i=>e.value.title=i),label:"title",onChange:f},null,8,["modelValue"]),_(I,{modelValue:e.value.artist,"onUpdate:modelValue":l[1]||(l[1]=i=>e.value.artist=i),label:"artist",onChange:f},null,8,["modelValue"]),_(I,{modelValue:e.value.spotify,"onUpdate:modelValue":l[2]||(l[2]=i=>e.value.spotify=i),label:"Spotify Link",onChange:h,buttonIcon:"search",onButtonClick:f},null,8,["modelValue"]),_(I,{modelValue:e.value.key,"onUpdate:modelValue":l[3]||(l[3]=i=>e.value.key=i),label:"key"},null,8,["modelValue"]),_(O,{modelValue:e.value.bpm,"onUpdate:modelValue":l[4]||(l[4]=i=>e.value.bpm=i),min:0,label:"bpm"},null,8,["modelValue"]),_(O,{modelValue:e.value.transpose,"onUpdate:modelValue":l[5]||(l[5]=i=>e.value.transpose=i),min:-12,max:12,label:"transpose"},null,8,["modelValue"]),_(O,{modelValue:e.value.octave,"onUpdate:modelValue":l[6]||(l[6]=i=>e.value.octave=i),min:-1,max:1,label:"octave"},null,8,["modelValue"])],64))}}),mt={class:"group"},vt={class:"content"},gt={class:"group"},ft={class:"flex space-between"},_t={class:"group section"},ht={class:"flex space-between"},yt={class:"flex"},bt=["onClick"],kt={class:"content"},Vt=["onClick","id"],wt={class:"flex end"},$t=["onClick"],Ct={class:"content flex-row"},xt={class:"group"},St={class:"content"},Pt={class:"group"},It={class:"flex"},Ut=S({__name:"Structure",props:{song:{required:!0,type:Object}},setup(r){const k=q(),g=r;U(()=>g.song,o=>{o&&(e.value=o)});const e=V(g.song);U(()=>e.value,o=>{o&&k.updateSong(o)});const f=V({});window.addEventListener("click",o=>{let s=o.target;for(let v=0;v<5;v++){if(!s)return;if(s.classList.contains("group")||!s.parentElement)break;s=s.parentElement}if(!s)return;const[t,u]=s.id.split(".");for(let v=0;v<e.value.sections.length;v++){const $=e.value.sections[v];for(let a=0;a<$.progression.length;a++){if(v===Number(t)&&a===Number(u))continue;const y=$.progression[a];delete y.selected}}}),window.addEventListener("chord-click",o=>{const{sectionIndex:s,chordIndex:t}=o.detail,u=`${s}.${t}`,v=()=>{var $;($=document.getElementById(u))==null||$.scrollIntoView({behavior:"smooth",block:"center"})};if(!f.value.sections){f.value.sections=!0,setTimeout(v,10);return}v()});const h=o=>{e.value.midi&&e.value.midi.splice(o,1)},c=async()=>new Promise((o,s)=>{const t=document.createElement("input");t.type="file",t.accept=".mid",t.onchange=async()=>{if(!t.files){s();return}const u=t.files[0],v=await me(u);if(!v){s();return}o(v)},t.click()}),l=async o=>{const s=await c();s&&e.value.midi&&(e.value.midi[o]=s)},i=async()=>{e.value.midi||(e.value.midi=[]);const o=await c();o&&e.value.midi.push(o)},p=o=>{const s=X.value.includes("detected")?e.value.key:X.value;o.progression.push({chord:s,duration:4,id:Math.random().toString(36)})};return H(()=>{fe()}),(o,s)=>(d(),m(w,null,[n("div",mt,[s[6]||(s[6]=n("h2",null,"Structure",-1)),n("div",vt,[(d(!0),m(w,null,x(e.value.structure,(t,u)=>(d(),L(J,{modelValue:e.value.structure[u],"onUpdate:modelValue":[v=>e.value.structure[u]=v,v=>{v==="(none)"&&e.value.structure.splice(u,1)}],options:[...e.value.sections.map(v=>String(v.type)),"(none)"],label:"section"},null,8,["modelValue","onUpdate:modelValue","options"]))),256))]),_(M,{onClick:s[0]||(s[0]=t=>e.value.structure.push("")),icon:"add",label:"add section"})]),n("div",gt,[n("div",ft,[s[7]||(s[7]=n("h2",null,"Sections",-1)),n("span",{class:"material-symbols-rounded",onClick:s[1]||(s[1]=t=>f.value.sections=!f.value.sections)},b(f.value.sections?"expand_less":"expand_more"),1)]),f.value.sections?(d(),m(w,{key:0},[_(A(Q),{modelValue:e.value.sections,"onUpdate:modelValue":s[3]||(s[3]=t=>e.value.sections=t),class:"content","item-key":"id",onDragover:s[4]||(s[4]=K(()=>{},["stop"]))},{item:R(({element:t})=>[n("div",_t,[n("div",ht,[n("div",yt,[_(J,{modelValue:t.type,"onUpdate:modelValue":u=>t.type=u,options:A(ie),label:"type"},null,8,["modelValue","onUpdate:modelValue","options"]),_(I,{modelValue:t.name,"onUpdate:modelValue":u=>t.name=u,label:"name"},null,8,["modelValue","onUpdate:modelValue"])]),n("span",{onClick:u=>e.value.sections.splice(e.value.sections.indexOf(t),1),class:"material-symbols-rounded"}," delete ",8,bt)]),n("div",kt,[_(A(Q),{modelValue:t.progression,"onUpdate:modelValue":u=>t.progression=u,class:"content","item-key":t.id,onDragover:s[2]||(s[2]=K(()=>{},["stop"]))},{item:R(({element:u})=>[n("div",{class:"group chord",onClick:v=>u.selected=!0,id:e.value.sections.indexOf(t)+"."+t.progression.indexOf(u)},[n("div",wt,[n("span",{onClick:v=>t.progression.splice(t.progression.indexOf(u),1),class:"material-symbols-rounded"},"-",8,$t)]),n("div",Ct,[_(I,{modelValue:u.chord,"onUpdate:modelValue":v=>u.chord=v,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),_(O,{modelValue:u.duration,"onUpdate:modelValue":v=>u.duration=v,min:1,label:"duration"},null,8,["modelValue","onUpdate:modelValue"])])],8,Vt)]),_:2},1032,["modelValue","onUpdate:modelValue","item-key"])]),_(M,{onClick:u=>p(t),icon:"add",label:"add chord"},null,8,["onClick"])])]),_:1},8,["modelValue"]),_(M,{onClick:s[5]||(s[5]=t=>e.value.sections.push({type:"chorus",progression:[],id:Math.random().toString(36)})),icon:"add",label:"add section"})],64)):C("",!0)]),n("div",xt,[s[8]||(s[8]=n("h2",null,"Melodies",-1)),n("div",St,[(d(!0),m(w,null,x(r.song.midi,(t,u)=>(d(),m("div",Pt,[_(I,{modelValue:t.name,"onUpdate:modelValue":v=>t.name=v,label:"name"},null,8,["modelValue","onUpdate:modelValue"]),n("div",It,[_(M,{onClick:v=>h(u),icon:"delete",label:"delete"},null,8,["onClick"]),_(M,{onClick:v=>l(u),icon:"sync",label:"replace"},null,8,["onClick"])])]))),256))]),_(M,{onClick:i,icon:"add",label:"add"})])],64))}}),Et=B(Ut,[["__scopeId","data-v-83d7eaa8"]]),Nt={class:"settings"},Mt={key:0,class:"spotify"},Bt=["src"],Tt={class:"tabs flex space-between"},Ot=["onClick"],qt={class:"configuration"},jt=S({__name:"Editor",props:{song:{required:!0,type:Object}},setup(r){q();const k=r;U(()=>k.song,h=>{h&&(g.value=h)});const g=V(k.song),e=[{name:"metadata",component:z(pt)},{name:"instrument",component:z(ct)},{name:"sections",component:z(Et)}],f=V(e[0]);return(h,c)=>(d(),m("div",Nt,[g.value.spotify?(d(),m("div",Mt,[n("iframe",{src:`https://open.spotify.com/embed/track/${g.value.spotify.split("/").pop()}`,width:"100%",height:"80",frameborder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,Bt)])):C("",!0),n("div",Tt,[(d(),m(w,null,x(e,l=>n("label",{key:l.name,class:ee({selected:f.value.name===l.name}),onClick:i=>f.value=l},b(l.name),11,Ot)),64))]),n("div",qt,[(d(),L(re(f.value.component),{song:r.song},null,8,["song"]))])]))}}),Dt={class:"editor"},Rt={class:"preview"},At={key:0,class:"pages"},Lt={class:""},Wt={class:"config container"},Ft=S({__name:"index",setup(r){const k=q(),g=ue(),e=de();let f=g.params.id;if(!f){const p=k.addEmptySong();e.push({path:`/editor/${p}`,replace:!0}),f=String(p)}const h=k.song(f);h||e.push("/");const c=V(h),l=V(),i=()=>{if(!c.value)return;const p="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c.value)),o=document.createElement("a");o.setAttribute("href",p),o.setAttribute("download",`${c.value.title}.chordsheets.json`),document.body.appendChild(o),o.click(),o.remove()};return(p,o)=>{const s=ce("router-link");return d(),L(Z,{minWidth:300},{default:R(()=>[_(s,{to:"/browse",class:"back-button"},{default:R(()=>o[4]||(o[4]=[n("span",{class:"material-symbols-rounded"},"arrow_back",-1)])),_:1}),n("div",Dt,[n("div",Rt,[l.value?(d(),m("div",At,[C("",!0),n("span",{class:"material-symbols-rounded",onClick:o[2]||(o[2]=(...t)=>l.value.print&&l.value.print(...t))}," print "),n("span",{class:"material-symbols-rounded",onClick:o[3]||(o[3]=(...t)=>l.value.download&&l.value.download(...t))}," picture_as_pdf "),n("span",{class:"material-symbols-rounded",onClick:i}," file_download ")])):C("",!0),n("div",Lt,[_(He,{song:c.value,ref_key:"preview",ref:l},null,8,["song"])])]),_(Z,{minWidth:1100,error:""},{default:R(()=>[n("div",Wt,[_(jt,{song:c.value},null,8,["song"])])]),_:1})])]),_:1})}}}),on=B(Ft,[["__scopeId","data-v-434c21e4"]]);export{on as default};
