import{d as E,r as h,w as P,a as T,c as b,b as t,e as r,u as _,f as k,F as x,g as $,o as v,t as f,h as q,i as A,p as N,j as U,k as j}from"./main-70cdc37c.js";import{u as F,I as u,T as M,d as O,_ as R,E as J}from"./vuedraggable.umd-8f357d2c.js";import{D as z}from"./Dropdown-54df0cc7.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-e44465e9.js";const m=p=>(N("data-v-19a382f2"),p=p(),U(),p),H={class:"dashboard"},K={class:"wrap"},Q=m(()=>t("h1",null,[j("Chord"),t("span",{class:"accent"},"Sheets")],-1)),W={class:"flex"},X=m(()=>t("hr",null,null,-1)),Y={class:"filters"},Z=m(()=>t("hr",null,null,-1)),ee={class:"song"},te={class:"cover"},se=["src"],oe={class:"info"},ne={class:"bpm"},ae={class:"key"},le=["onClick"],re=m(()=>t("aside",{class:"card min-h-screen sticky"},[t("div",{class:"content"},[t("h2",null,"Learn Music Theory"),t("p",null,"Coming soon...")])],-1)),ie={class:"void"},ce={class:"parent"},de=E({__name:"Dashboard",setup(p){const n=F(),g=h(),C=async()=>{await n.prepareRender();const e=JSON.stringify(n.songs,null,4),o=document.createElement("a"),l=new Blob([e],{type:"text/plain"});o.href=URL.createObjectURL(l),o.download="chordsheets.json",o.click()},S=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=o=>{var i;const l=(i=o.target.files)==null?void 0:i[0];if(!l)return;const s=new FileReader;s.onload=c=>{var w;const B=(w=c.target)==null?void 0:w.result,D=JSON.parse(B);n.songs=D},s.readAsText(l)},e.click()},y=async()=>{let e=new J({orientation:"portrait",unit:"px",format:"a4"});for(const o of g.value??[])await o.renderTo(e),o.song!==n.songs[n.songs.length-1]&&e.addPage();return e},I=async()=>{const e=await y();e.autoPrint(),e.output("dataurlnewwindow")},L=async()=>{(await y()).save("chordsheets.pdf")},a=h({artist:"",query:""}),d=h([]);P(()=>{d.value=n.songs.filter(e=>{if(a.value.artist&&a.value.artist!=="(any)"&&!e.artist.toLowerCase().includes(a.value.artist.toLowerCase()))return!1;const o=`${e.title} ${e.artist}`.toLowerCase();return!(a.value.query&&!o.includes(a.value.query.toLowerCase()))})});const V=({moved:e})=>{const o=n.songs.findIndex(c=>c.id===e.element.id),l=d.value[e.newIndex-1%d.value.length],s=l?n.songs.findIndex(c=>c.id===l.id):-1,i=e.newIndex>e.oldIndex?s:s+1;n.moveTo(o,i)};return(e,o)=>{const l=T("router-link");return v(),b(x,null,[t("div",H,[t("div",K,[t("main",null,[Q,t("div",W,[r(u,{icon:"add",label:"New Song",onClick:o[0]||(o[0]=s=>e.$router.push("/editor")),style:"green"}),r(u,{icon:"file_download",label:"Save Library",onClick:C,style:"yellow"}),r(u,{icon:"file_upload",label:"Import Library",onClick:S,style:"yellow"}),r(u,{label:"Export all as PDF",icon:"picture_as_pdf",onClick:L,style:"blue"}),r(u,{label:"Print All",icon:"print",onClick:I,style:"blue"})]),X,t("div",Y,[r(M,{label:"Search",modelValue:a.value.query,"onUpdate:modelValue":o[1]||(o[1]=s=>a.value.query=s),placeholder:"Search for a song"},null,8,["modelValue"]),r(z,{label:"Artist",modelValue:a.value.artist,"onUpdate:modelValue":o[2]||(o[2]=s=>a.value.artist=s),options:["(any)",...new Set(_(n).songs.map(s=>s.artist))]},null,8,["modelValue","options"])]),Z,r(_(O),{modelValue:d.value,"onUpdate:modelValue":o[3]||(o[3]=s=>d.value=s),class:"songs",onChange:V,"item-key":"id"},{item:k(({element:s,index:i})=>[r(l,{to:`/editor?s=${i}`},{default:k(()=>[t("div",ee,[t("div",te,[t("img",{src:s.cover??"placeholders/song.svg"},null,8,se)]),t("div",oe,[t("h2",null,f(s.title),1),t("span",null,f(s.artist),1)]),t("span",ne,f(s.bpm)+" BPM ",1),t("span",ae,f(s.key),1),t("span",{class:"material-symbols-rounded delete",onClick:q(c=>_(n).removeSong(s),["prevent"])}," delete ",8,le)])]),_:2},1032,["to"])]),_:1},8,["modelValue"])]),re])]),t("div",ie,[t("div",ce,[(v(!0),b(x,null,$(_(n).songs,s=>(v(),A(R,{ref_for:!0,ref_key:"allPages",ref:g,song:s},null,8,["song"]))),256))])])],64)}}});const he=G(de,[["__scopeId","data-v-19a382f2"]]);export{he as default};
